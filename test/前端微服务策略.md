# å‰ç«¯å¾®æœåŠ¡ç­–ç•¥å®Œå…¨æŒ‡å—

> ä»æ–°æ‰‹åˆ°ä¸“å®¶ï¼šä¸€æ–‡ææ‡‚å‰ç«¯å¾®æœåŠ¡çš„ 5 ç§æ ¸å¿ƒç­–ç•¥

---

## ä¸€ã€ä»€ä¹ˆæ˜¯å‰ç«¯å¾®æœåŠ¡ï¼Ÿ

**ä¸€å¥è¯å®šä¹‰**ï¼šæŠŠä¸€ä¸ªå·¨å¤§çš„å‰ç«¯åº”ç”¨æ‹†åˆ†æˆå¤šä¸ªç‹¬ç«‹çš„å°åº”ç”¨ï¼Œæ¯ä¸ªå°åº”ç”¨å¯ä»¥ç‹¬ç«‹å¼€å‘ã€ç‹¬ç«‹éƒ¨ç½²ã€ç‹¬ç«‹è¿è¡Œï¼Œæœ€ç»ˆç»„åˆæˆä¸€ä¸ªå®Œæ•´çš„äº§å“ã€‚

### ğŸ• é€šä¿—ç±»æ¯”ï¼šæŠ«è¨åº—æ¨¡å¼

æƒ³è±¡ä½ å¼€äº†ä¸€å®¶æŠ«è¨åº—ï¼š

| ä¼ ç»Ÿæ¨¡å¼ï¼ˆå•ä½“åº”ç”¨ï¼‰ | å¾®æœåŠ¡æ¨¡å¼ |
|---------------------|-----------|
| ä¸€ä¸ªå¨å¸ˆåšæ‰€æœ‰äº‹ï¼šå’Œé¢ã€åšé…±ã€çƒ¤æŠ«è¨ã€åˆ‡å— | ä¸“äººä¸“äº‹ï¼šå’Œé¢å¸ˆå‚…ã€é…±æ–™å¸ˆå‚…ã€çƒ¤æŠ«è¨å¸ˆå‚…ã€åˆ‡å—å¸ˆå‚… |
| å¨å¸ˆè¯·å‡ = æ•´ä¸ªåº—å…³é—¨ | ä¸€ä¸ªå¸ˆå‚…è¯·å‡ï¼Œå…¶ä»–äººç…§å¸¸å·¥ä½œ |
| æƒ³åŠ æ–°å“ç§ï¼Œæ•´ä¸ªæµç¨‹éƒ½è¦æ”¹ | åªéœ€è¦æ–°å¢ä¸€ä¸ªä¸“é—¨çš„å¸ˆå‚… |

---

## äºŒã€5 ç§å‰ç«¯å¾®æœåŠ¡ç­–ç•¥è¯¦è§£

### ç­–ç•¥ 1ï¼šModule Federationï¼ˆæ¨¡å—è”é‚¦ï¼‰â­ æ¨è

#### ğŸ“– åŸç†

**æ ¸å¿ƒæ€æƒ³**ï¼šå¤šä¸ªç‹¬ç«‹æ„å»ºçš„åº”ç”¨åœ¨è¿è¡Œæ—¶åŠ¨æ€å…±äº«ä»£ç æ¨¡å—ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    è¿è¡Œæ—¶åŠ¨æ€åŠ è½½                             â”‚
â”‚                                                             â”‚
â”‚   Host åº”ç”¨ (æ¶ˆè´¹è€…)              Remote åº”ç”¨ (æä¾›è€…)         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚   â”‚  apps-public â”‚ â”€â”€åŠ è½½æ¨¡å—â”€â”€â†’  â”‚     mf      â”‚            â”‚
â”‚   â”‚             â”‚                â”‚             â”‚            â”‚
â”‚   â”‚ ä½¿ç”¨è¿œç¨‹ç»„ä»¶ â”‚ â†â”€â”€è¿”å›ä»£ç â”€â”€  â”‚ æš´éœ²ç»„ä»¶     â”‚            â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                             â”‚
â”‚   å…³é”®ï¼šå…±äº«ä¾èµ–ï¼ˆVueã€Vuex ç­‰ï¼‰ï¼Œé¿å…é‡å¤åŠ è½½                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ğŸ” æ•°æ®æµè½¬å…¨è¿‡ç¨‹ï¼ˆä»ç‚¹å‡»åˆ°æ˜¾ç¤ºï¼‰

è®©æˆ‘ä»¬è·Ÿè¸ªä¸€ä¸ªçœŸå®åœºæ™¯ï¼š**ç”¨æˆ·åœ¨ apps-public ä¸­ç‚¹å‡»"é€‰æ‹©æ–‡ä»¶"æŒ‰é’®**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           å®Œæ•´çš„æ•°æ®æµè½¬è¿‡ç¨‹                                  â”‚
â”‚                                                                             â”‚
â”‚  ğŸ‘¤ ç”¨æˆ·æ“ä½œï¼šç‚¹å‡»"é€‰æ‹©æ–‡ä»¶"æŒ‰é’®                                               â”‚
â”‚                                                                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                             â”‚
â”‚  ğŸ“ é˜¶æ®µ 1: è§¦å‘åŠ è½½ï¼ˆHost åº”ç”¨å†…ï¼‰                                            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚
â”‚  ä»£ç æ‰§è¡Œï¼šFinderV2Wrapper.vue                                              â”‚
â”‚                                                                             â”‚
â”‚    methods: {                                                               â”‚
â”‚      async openFinder() {                                                   â”‚
â”‚        // è°ƒç”¨å·¥å…·å‡½æ•°åŠ è½½è¿œç¨‹æ¨¡å—                                             â”‚
â”‚        const UikitFinderV2 = await loadRemoteModule({                       â”‚
â”‚          containerName: 'kdocs',              â† è¦æ‰¾å“ªä¸ªè¿œç¨‹åº”ç”¨              â”‚
â”‚          exposeModuleName: 'UikitFinderV2',   â† è¦ç”¨å“ªä¸ªæ¨¡å—                 â”‚
â”‚          url: 'https://cdn.example.com/mf/kdocs-mf.js'  â† ä»å“ªåŠ è½½          â”‚
â”‚        })                                                                   â”‚
â”‚      }                                                                      â”‚
â”‚    }                                                                        â”‚
â”‚                                                                             â”‚
â”‚  æ•°æ®çŠ¶æ€ï¼š                                                                   â”‚
â”‚    UikitFinderV2 = undefined  (è¿˜æ²¡åŠ è½½)                                     â”‚
â”‚    é¡µé¢æ˜¾ç¤ºï¼šLoading...                                                      â”‚
â”‚                                                                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                             â”‚
â”‚  ğŸ“ é˜¶æ®µ 2: ç¬¬ä¸€æ¬¡ç½‘ç»œè¯·æ±‚ï¼ˆåŠ è½½è¿œç¨‹å…¥å£ï¼‰                                       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚
â”‚  æµè§ˆå™¨å‘èµ·ï¼š                                                                 â”‚
â”‚                                                                             â”‚
â”‚    GET https://cdn.example.com/mf/kdocs-mf.js                               â”‚
â”‚                                                                             â”‚
â”‚    Host æµè§ˆå™¨                          CDN æœåŠ¡å™¨                            â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚    â”‚          â”‚  â”€â”€â”€è¯·æ±‚ kdocs-mf.jsâ”€â†’  â”‚          â”‚                         â”‚
â”‚    â”‚ Network  â”‚                        â”‚   CDN    â”‚                         â”‚
â”‚    â”‚          â”‚  â†â”€â”€è¿”å› JS æ–‡ä»¶â”€â”€â”€â”€   â”‚          â”‚                         â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                                                                             â”‚
â”‚  å“åº”å†…å®¹ï¼ˆkdocs-mf.js çš„ç®€åŒ–ç‰ˆæœ¬ï¼‰ï¼š                                          â”‚
â”‚                                                                             â”‚
â”‚    (function() {                                                            â”‚
â”‚      // Webpack ç”Ÿæˆçš„è¿è¡Œæ—¶ä»£ç                                               â”‚
â”‚      var moduleMap = {                                                      â”‚
â”‚        './UikitFinderV2': function() {                                      â”‚
â”‚          // è¿”å›ä¸€ä¸ª Promiseï¼ŒæŒ‡å‘å®é™…çš„ç»„ä»¶ä»£ç                                 â”‚
â”‚          return import('./chunk-UikitFinderV2.js');                         â”‚
â”‚        }                                                                    â”‚
â”‚      };                                                                     â”‚
â”‚                                                                             â”‚
â”‚      // æ³¨å†Œå…¨å±€å®¹å™¨                                                          â”‚
â”‚      window.kdocs = {                                                       â”‚
â”‚        init: function(sharedScope) {                                        â”‚
â”‚          // æ¥æ”¶ Host ä¼ æ¥çš„å…±äº«ä¾èµ–                                           â”‚
â”‚          window.__remoteShared__ = sharedScope;                             â”‚
â”‚        },                                                                   â”‚
â”‚        get: function(moduleName) {                                          â”‚
â”‚          // æ ¹æ®æ¨¡å—åè¿”å›å¯¹åº”çš„åŠ è½½å‡½æ•°                                         â”‚
â”‚          return moduleMap[moduleName]();                                    â”‚
â”‚        }                                                                    â”‚
â”‚      };                                                                     â”‚
â”‚    })();                                                                    â”‚
â”‚                                                                             â”‚
â”‚  æ‰§è¡Œç»“æœï¼š                                                                   â”‚
â”‚    âœ… window.kdocs å¯¹è±¡å·²åˆ›å»º                                                 â”‚
â”‚    âœ… å¯ä»¥è°ƒç”¨ window.kdocs.get() å’Œ init()                                   â”‚
â”‚                                                                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                             â”‚
â”‚  ğŸ“ é˜¶æ®µ 3: åˆå§‹åŒ–å…±äº«ä¾èµ–ï¼ˆå†…å­˜æ“ä½œï¼Œæ— ç½‘ç»œè¯·æ±‚ï¼‰                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚
â”‚  ä»£ç æ‰§è¡Œï¼š                                                                   â”‚
â”‚                                                                             â”‚
â”‚    // Host æŠŠè‡ªå·±å·²ç»åŠ è½½çš„ä¾èµ–ä¼ ç»™ Remote                                      â”‚
â”‚    await window.kdocs.init({                                                â”‚
â”‚      vue: {                                                                 â”‚
â”‚        '2.6.14': {                                                          â”‚
â”‚          get: () => window.Vue,        â† Host å·²ç»åŠ è½½çš„ Vue å®ä¾‹             â”‚
â”‚          loaded: true,                                                      â”‚
â”‚          from: 'host'                                                       â”‚
â”‚        }                                                                    â”‚
â”‚      },                                                                     â”‚
â”‚      vuex: {                                                                â”‚
â”‚        '3.6.2': {                                                           â”‚
â”‚          get: () => window.Vuex,       â† Host å·²ç»åŠ è½½çš„ Vuex                â”‚
â”‚          loaded: true                                                       â”‚
â”‚        }                                                                    â”‚
â”‚      }                                                                      â”‚
â”‚    });                                                                      â”‚
â”‚                                                                             â”‚
â”‚  æ•°æ®ä¼ é€’ï¼š                                                                   â”‚
â”‚    Host å†…å­˜ â”€â”€â”€â”€ä¼ é€’å¯¹è±¡å¼•ç”¨â”€â”€â”€â†’ Remote å†…å­˜                                  â”‚
â”‚    (ä¸æ˜¯ç½‘ç»œè¯·æ±‚ï¼Œæ˜¯ JavaScript å¯¹è±¡ä¼ é€’)                                       â”‚
â”‚                                                                             â”‚
â”‚  ç»“æœï¼š                                                                       â”‚
â”‚    Remote ç°åœ¨çŸ¥é“äº†ï¼š                                                        â”‚
â”‚    "å“¦ï¼ŒHost å·²ç»æœ‰ Vue 2.6.14 äº†ï¼Œæˆ‘ä¸ç”¨å†åŠ è½½ Vue äº†ï¼"                       â”‚
â”‚                                                                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                             â”‚
â”‚  ğŸ“ é˜¶æ®µ 4: ç¬¬äºŒæ¬¡ç½‘ç»œè¯·æ±‚ï¼ˆåŠ è½½å®é™…ç»„ä»¶ä»£ç ï¼‰                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚
â”‚  ä»£ç æ‰§è¡Œï¼š                                                                   â”‚
â”‚                                                                             â”‚
â”‚    const module = await window.kdocs.get('./UikitFinderV2');                â”‚
â”‚                                                                             â”‚
â”‚  æµè§ˆå™¨è‡ªåŠ¨å‘èµ·ï¼š                                                              â”‚
â”‚                                                                             â”‚
â”‚    GET https://cdn.example.com/mf/chunk-UikitFinderV2.js                    â”‚
â”‚                                                                             â”‚
â”‚    Host æµè§ˆå™¨                          CDN æœåŠ¡å™¨                            â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚    â”‚          â”‚  â”€â”€â”€è¯·æ±‚ chunk æ–‡ä»¶â”€â”€â†’  â”‚          â”‚                         â”‚
â”‚    â”‚ Network  â”‚                        â”‚   CDN    â”‚                         â”‚
â”‚    â”‚          â”‚  â†â”€â”€è¿”å›ç»„ä»¶ä»£ç â”€â”€â”€â”€    â”‚          â”‚                         â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                                                                             â”‚
â”‚  å“åº”å†…å®¹ï¼ˆchunk-UikitFinderV2.js çš„ç®€åŒ–ç‰ˆæœ¬ï¼‰ï¼š                               â”‚
â”‚                                                                             â”‚
â”‚    // è¿™ä¸ªæ–‡ä»¶åŒ…å«å®é™…çš„ç»„ä»¶ä»£ç                                                 â”‚
â”‚    (function() {                                                            â”‚
â”‚      // ä»å…±äº«ä¾èµ–ä¸­è·å– Vueï¼ˆä¸æ˜¯é‡æ–°åŠ è½½ï¼ï¼‰                                   â”‚
â”‚      const Vue = window.__remoteShared__.vue['2.6.14'].get();               â”‚
â”‚      const Vuex = window.__remoteShared__.vuex['3.6.2'].get();              â”‚
â”‚                                                                             â”‚
â”‚      // ç»„ä»¶å®šä¹‰                                                             â”‚
â”‚      const UikitFinderV2 = {                                                â”‚
â”‚        mount(options, container) {                                          â”‚
â”‚          // ä½¿ç”¨ Host ä¼ æ¥çš„ Vue å®ä¾‹åˆ›å»ºç»„ä»¶                                   â”‚
â”‚          const vm = new Vue({                                               â”‚
â”‚            el: container,                                                   â”‚
â”‚            data: { files: [] },                                             â”‚
â”‚            methods: {                                                       â”‚
â”‚              selectFile(file) {                                             â”‚
â”‚                this.files.push(file);                                       â”‚
â”‚                options.onSelect(file);  â† è°ƒç”¨ Host ä¼ æ¥çš„å›è°ƒ                â”‚
â”‚              }                                                              â”‚
â”‚            }                                                                â”‚
â”‚          });                                                                â”‚
â”‚        }                                                                    â”‚
â”‚      };                                                                     â”‚
â”‚                                                                             â”‚
â”‚      // å¯¼å‡ºæ¨¡å—                                                             â”‚
â”‚      module.exports = UikitFinderV2;                                        â”‚
â”‚    })();                                                                    â”‚
â”‚                                                                             â”‚
â”‚  æ•°æ®çŠ¶æ€ï¼š                                                                   â”‚
â”‚    âœ… UikitFinderV2 æ¨¡å—å·²åŠ è½½                                                â”‚
â”‚    âœ… ç»„ä»¶ä»£ç å¯ä»¥æ‰§è¡Œäº†                                                       â”‚
â”‚                                                                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                             â”‚
â”‚  ğŸ“ é˜¶æ®µ 5: æŒ‚è½½ç»„ä»¶ï¼ˆå†…å­˜æ“ä½œ + DOM æ¸²æŸ“ï¼‰                                      â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚
â”‚  ä»£ç æ‰§è¡Œï¼š                                                                   â”‚
â”‚                                                                             â”‚
â”‚    // Host è°ƒç”¨ Remote ç»„ä»¶çš„ mount æ–¹æ³•                                      â”‚
â”‚    UikitFinderV2.mount({                                                    â”‚
â”‚      userId: '12345',                   â† Host ä¼ é€’çš„æ•°æ®                    â”‚
â”‚      action: 'selectFile',                                                  â”‚
â”‚      onSelect: (file) => {              â† Host ä¼ é€’çš„å›è°ƒå‡½æ•°                 â”‚
â”‚        console.log('é€‰ä¸­äº†', file);                                          â”‚
â”‚        this.selectedFile = file;        â† æ›´æ–° Host çš„æ•°æ®                   â”‚
â”‚      }                                                                      â”‚
â”‚    }, document.getElementById('finder-container'));                         â”‚
â”‚                                                                             â”‚
â”‚  æ•°æ®æµå‘ï¼š                                                                   â”‚
â”‚                                                                             â”‚
â”‚    Host å†…å­˜              â†’ä¼ å‚æ•°â†’               Remote ç»„ä»¶                  â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚    â”‚ userId      â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’   â”‚ åˆ›å»º Vue    â”‚             â”‚
â”‚    â”‚ onSelect()  â”‚                              â”‚ å®ä¾‹        â”‚             â”‚
â”‚    â”‚ container   â”‚                              â”‚             â”‚             â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                        â”‚                    â”‚
â”‚                                                        â†“                    â”‚
â”‚                                                 æ¸²æŸ“åˆ° DOM                   â”‚
â”‚                                                        â”‚                    â”‚
â”‚    é¡µé¢ DOM                                            â†“                    â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚    â”‚ <div id="finder-container">                            â”‚              â”‚
â”‚    â”‚   <div class="finder">                                 â”‚              â”‚
â”‚    â”‚     <ul>                                               â”‚              â”‚
â”‚    â”‚       <li>file1.doc</li>  â† Remote ç»„ä»¶æ¸²æŸ“çš„          â”‚              â”‚
â”‚    â”‚       <li>file2.xlsx</li>                              â”‚              â”‚
â”‚    â”‚     </ul>                                              â”‚              â”‚
â”‚    â”‚     <button>ç¡®è®¤</button>                              â”‚              â”‚
â”‚    â”‚   </div>                                               â”‚              â”‚
â”‚    â”‚ </div>                                                 â”‚              â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                                             â”‚
â”‚  ç»“æœï¼š                                                                       â”‚
â”‚    âœ… é¡µé¢ä¸Šæ˜¾ç¤ºäº†æ–‡ä»¶é€‰æ‹©å™¨                                                    â”‚
â”‚    âœ… ç”¨æˆ·å¯ä»¥çœ‹åˆ°å¹¶æ“ä½œäº†                                                     â”‚
â”‚                                                                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                             â”‚
â”‚  ğŸ“ é˜¶æ®µ 6: ç”¨æˆ·äº¤äº’ï¼ˆæ•°æ®å›ä¼ ï¼‰                                                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚
â”‚  ç”¨æˆ·æ“ä½œï¼šç‚¹å‡»æ–‡ä»¶ "file1.doc"                                               â”‚
â”‚                                                                             â”‚
â”‚  æ•°æ®æµå‘ï¼ˆä» Remote å›åˆ° Hostï¼‰ï¼š                                             â”‚
â”‚                                                                             â”‚
â”‚    Remote ç»„ä»¶å†…éƒ¨                                                           â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚    â”‚ selectFile(file) {                  â”‚                                  â”‚
â”‚    â”‚   // Remote å†…éƒ¨å¤„ç†                 â”‚                                  â”‚
â”‚    â”‚   this.selectedFiles.push(file);    â”‚                                  â”‚
â”‚    â”‚                                     â”‚                                  â”‚
â”‚    â”‚   // è°ƒç”¨ Host ä¼ æ¥çš„å›è°ƒ            â”‚                                  â”‚
â”‚    â”‚   options.onSelect(file); â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â†’ è·¨è¶Šè¾¹ç•Œ                    â”‚
â”‚    â”‚ }                                   â”‚                                  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                            â†“                                                â”‚
â”‚                     ä¼ é€’æ•°æ®å¯¹è±¡                                              â”‚
â”‚                     { name: 'file1.doc', id: 123 }                          â”‚
â”‚                            â†“                                                â”‚
â”‚    Host åº”ç”¨å†…éƒ¨                                                              â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚    â”‚ onSelect(file) {                    â”‚                                  â”‚
â”‚    â”‚   console.log('æ”¶åˆ°æ–‡ä»¶', file);     â”‚                                  â”‚
â”‚    â”‚   this.selectedFile = file; â†æ›´æ–°çŠ¶æ€â”‚                                  â”‚
â”‚    â”‚   this.$message.success('é€‰æ‹©æˆåŠŸ');â”‚                                  â”‚
â”‚    â”‚ }                                   â”‚                                  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                                                                             â”‚
â”‚  å†…å­˜çŠ¶æ€å˜åŒ–ï¼š                                                                â”‚
â”‚    Host: this.selectedFile = { name: 'file1.doc', id: 123 }                â”‚
â”‚    é¡µé¢æ˜¾ç¤º: "å·²é€‰æ‹©ï¼šfile1.doc"                                              â”‚
â”‚                                                                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                             â”‚
â”‚  ğŸ“Š æ•´ä¸ªè¿‡ç¨‹çš„ç½‘ç»œè¯·æ±‚æ±‡æ€»ï¼š                                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚
â”‚                                                                             â”‚
â”‚  1. GET https://cdn.example.com/mf/kdocs-mf.js                (è¿œç¨‹å…¥å£)    â”‚
â”‚     å¤§å°: ~50KB                                                              â”‚
â”‚     ç”¨é€”: æ³¨å†Œ window.kdocs å®¹å™¨                                             â”‚
â”‚                                                                             â”‚
â”‚  2. GET https://cdn.example.com/mf/chunk-UikitFinderV2.js    (ç»„ä»¶ä»£ç )     â”‚
â”‚     å¤§å°: ~200KB                                                             â”‚
â”‚     ç”¨é€”: å®é™…çš„ç»„ä»¶å®ç°                                                      â”‚
â”‚                                                                             â”‚
â”‚  âš ï¸ æ³¨æ„ï¼šVueã€Vuex ç­‰å…±äº«ä¾èµ–ä¸ä¼šå†æ¬¡åŠ è½½ï¼                                    â”‚
â”‚           å› ä¸º Remote ä½¿ç”¨çš„æ˜¯ Host å·²ç»åŠ è½½çš„ç‰ˆæœ¬                              â”‚
â”‚                                                                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                             â”‚
â”‚  ğŸ¯ å…³é”®ç‚¹æ€»ç»“ï¼š                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚
â”‚                                                                             â”‚
â”‚  âœ… åªæœ‰ 2 æ¬¡ç½‘ç»œè¯·æ±‚ï¼ˆå…¥å£ + ç»„ä»¶ï¼‰                                            â”‚
â”‚  âœ… å…±äº«ä¾èµ–ï¼ˆVueï¼‰åªåŠ è½½ä¸€æ¬¡ï¼ŒèŠ‚çœæµé‡                                          â”‚
â”‚  âœ… æ•°æ®é€šè¿‡ JavaScript å¯¹è±¡å¼•ç”¨ä¼ é€’ï¼ˆä¸æ˜¯åºåˆ—åŒ–ï¼‰                               â”‚
â”‚  âœ… Host å’Œ Remote åœ¨åŒä¸€ä¸ª window ä¸‹ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨                             â”‚
â”‚  âœ… ç»„ä»¶ä»£ç å¯ä»¥ç‹¬ç«‹æ›´æ–°ï¼ŒHost ä¸éœ€è¦é‡æ–°éƒ¨ç½²                                     â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ğŸ’¡ ç”¨ç”Ÿæ´»åœºæ™¯ç±»æ¯”è¿™ä¸ªè¿‡ç¨‹

æƒ³è±¡ä½ è¦åœ¨å®¶é‡Œï¼ˆHostï¼‰ç»„è£…ä¸€ä¸ªä»å®å®å®¶å…·åº—ï¼ˆRemoteï¼‰ä¹°çš„å„¿ç«¥åºŠï¼š

1. **é˜¶æ®µ 1-2**ï¼šä½ æ‰“ç”µè¯ï¼ˆç½‘ç»œè¯·æ±‚ï¼‰ç»™å®¶å…·åº—ï¼Œåº—å‘˜å‘Šè¯‰ä½ "æˆ‘ä»¬æœ‰è¿™ä¸ªåºŠï¼Œå‹å·æ˜¯ XYZ"ï¼ˆkdocs-mf.jsï¼‰

2. **é˜¶æ®µ 3**ï¼šåº—å‘˜é—®ï¼š"ä½ å®¶æœ‰èºä¸åˆ€å—ï¼Ÿ"ä½ è¯´"æœ‰ï¼Œæ˜¯åå­—èºä¸åˆ€"ï¼ˆå…±äº« Vue ä¾èµ–ï¼‰ï¼Œåº—å‘˜è¯´"å¥½ï¼Œé‚£æˆ‘ä»¬å°±ä¸ç»™ä½ å¸¦å·¥å…·äº†"

3. **é˜¶æ®µ 4**ï¼šé€è´§ä¸Šé—¨ï¼ˆchunk-UikitFinderV2.jsï¼‰ï¼Œåªé€åºŠçš„é›¶ä»¶ï¼Œä¸é€èºä¸åˆ€ï¼ˆå› ä¸ºä½ å·²ç»æœ‰äº†ï¼‰

4. **é˜¶æ®µ 5**ï¼šä½ ç”¨è‡ªå·±çš„èºä¸åˆ€ï¼ˆHost çš„ Vueï¼‰ç»„è£…åºŠï¼ˆmount ç»„ä»¶ï¼‰

5. **é˜¶æ®µ 6**ï¼šå­©å­ç¡åœ¨åºŠä¸Šï¼Œå¼€å¿ƒåœ°è·Ÿä½ è¯´"çˆ¸çˆ¸è¿™åºŠçœŸå¥½"ï¼ˆæ•°æ®å›ä¼ ï¼‰

**å…³é”®**ï¼šå¦‚æœæ¯ä¸ªå®¶å…·éƒ½å¸¦ä¸€å¥—å·¥å…·ï¼Œä½ å®¶å°±å †æ»¡é‡å¤çš„èºä¸åˆ€äº†ï¼å…±äº«ä¾èµ–å°±æ˜¯é¿å…è¿™ç§æµªè´¹ã€‚

---

#### ğŸ”¬ loadRemoteModule æºç è§£æ

è®©æˆ‘ä»¬æ·±å…¥çœ‹çœ‹ `loadRemoteModule` è¿™ä¸ªå‡½æ•°æ˜¯å¦‚ä½•å®ç°çš„ï¼š

**æ ¸å¿ƒæµç¨‹å›¾ï¼š**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    loadRemoteModule å‡½æ•°æ‰§è¡Œæµç¨‹                              â”‚
â”‚                                                                             â”‚
â”‚  è¾“å…¥å‚æ•°ï¼š                                                                   â”‚
â”‚  {                                                                          â”‚
â”‚    containerName: 'kdocs',               // è¿œç¨‹å®¹å™¨åç§°                      â”‚
â”‚    exposeModuleName: 'UikitFinderV2',    // è¦æš´éœ²çš„æ¨¡å—å                    â”‚
â”‚    url: 'https://xxx/kdocs-mf.js',       // è¿œç¨‹å…¥å£æ–‡ä»¶åœ°å€                  â”‚
â”‚    shareScope: 'default',                // å…±äº«ä½œç”¨åŸŸï¼ˆå¯é€‰ï¼‰                 â”‚
â”‚    shareModule: {},                      // è‡ªå®šä¹‰å…±äº«æ¨¡å—ï¼ˆå¯é€‰ï¼‰              â”‚
â”‚    manifest: 'https://xxx/manifest.json' // manifestæ–‡ä»¶ï¼ˆå¯é€‰ï¼‰             â”‚
â”‚  }                                                                          â”‚
â”‚                                                                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                                                                             â”‚
â”‚  æ­¥éª¤ 1: æ£€æŸ¥å®¹å™¨æ˜¯å¦å·²åŠ è½½                                                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚                                                                             â”‚
â”‚    if (window[containerName] !== undefined) {                              â”‚
â”‚      // å®¹å™¨å·²å­˜åœ¨ï¼Œè·³åˆ°æ­¥éª¤ 3                                                â”‚
â”‚    } else {                                                                 â”‚
â”‚      // å®¹å™¨ä¸å­˜åœ¨ï¼Œç»§ç»­æ­¥éª¤ 2                                                â”‚
â”‚    }                                                                        â”‚
â”‚                                                                             â”‚
â”‚  âœ… å¥½å¤„ï¼šé¿å…é‡å¤åŠ è½½åŒä¸€ä¸ªè¿œç¨‹å…¥å£æ–‡ä»¶                                        â”‚
â”‚                                                                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                                                                             â”‚
â”‚  æ­¥éª¤ 2: åŠ è½½è¿œç¨‹å…¥å£æ–‡ä»¶ï¼ˆè°ƒç”¨ getRemoteEntryï¼‰                               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚                                                                             â”‚
â”‚    await getRemoteEntry(containerName, url, manifest)                      â”‚
â”‚                                                                             â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚    â”‚ getRemoteEntry å†…éƒ¨å®ç°ï¼š                                        â”‚     â”‚
â”‚    â”‚                                                                 â”‚     â”‚
â”‚    â”‚ function getRemoteEntry(name, url, manifest) {                  â”‚     â”‚
â”‚    â”‚   return new Promise((resolve, reject) => {                     â”‚     â”‚
â”‚    â”‚     // æ£€æŸ¥å®¹å™¨æ˜¯å¦å·²å­˜åœ¨                                         â”‚     â”‚
â”‚    â”‚     if (window[name] !== undefined) {                           â”‚     â”‚
â”‚    â”‚       return resolve(window[name])                              â”‚     â”‚
â”‚    â”‚     }                                                           â”‚     â”‚
â”‚    â”‚                                                                 â”‚     â”‚
â”‚    â”‚     // åŠ è½½è¿œç¨‹è„šæœ¬                                               â”‚     â”‚
â”‚    â”‚     loadScript(url, (event) => {                                â”‚     â”‚
â”‚    â”‚       if (window[name] !== undefined) {                         â”‚     â”‚
â”‚    â”‚         resolve(window[name])                                   â”‚     â”‚
â”‚    â”‚       } else {                                                  â”‚     â”‚
â”‚    â”‚         reject(new Error('Loading failed'))                     â”‚     â”‚
â”‚    â”‚       }                                                         â”‚     â”‚
â”‚    â”‚     }, name, {                                                  â”‚     â”‚
â”‚    â”‚       integrity: manifest?.entry?.integrity  // SRI æ ¡éªŒ         â”‚     â”‚
â”‚    â”‚     })                                                          â”‚     â”‚
â”‚    â”‚   })                                                            â”‚     â”‚
â”‚    â”‚ }                                                               â”‚     â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                             â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚    â”‚ loadScript å†…éƒ¨å®ç°ï¼š                                            â”‚     â”‚
â”‚    â”‚                                                                 â”‚     â”‚
â”‚    â”‚ function loadScript(url, done, key, attributes) {               â”‚     â”‚
â”‚    â”‚   // æ£€æŸ¥æ˜¯å¦å·²æœ‰åŒæ ·çš„ script æ ‡ç­¾                               â”‚     â”‚
â”‚    â”‚   let script = findExistingScript(url, key)                     â”‚     â”‚
â”‚    â”‚                                                                 â”‚     â”‚
â”‚    â”‚   if (!script) {                                                â”‚     â”‚
â”‚    â”‚     // åˆ›å»ºæ–°çš„ script æ ‡ç­¾                                       â”‚     â”‚
â”‚    â”‚     script = document.createElement('script')                   â”‚     â”‚
â”‚    â”‚     script.type = 'text/javascript'                             â”‚     â”‚
â”‚    â”‚     script.src = url                                            â”‚     â”‚
â”‚    â”‚     script.setAttribute('data-webpack', key)                    â”‚     â”‚
â”‚    â”‚                                                                 â”‚     â”‚
â”‚    â”‚     // è®¾ç½® SRIï¼ˆå­èµ„æºå®Œæ•´æ€§ï¼‰                                     â”‚     â”‚
â”‚    â”‚     if (attributes?.integrity) {                                â”‚     â”‚
â”‚    â”‚       script.setAttribute('integrity', attributes.integrity)    â”‚     â”‚
â”‚    â”‚       script.setAttribute('crossorigin', 'anonymous')           â”‚     â”‚
â”‚    â”‚     }                                                           â”‚     â”‚
â”‚    â”‚                                                                 â”‚     â”‚
â”‚    â”‚     // ç›‘å¬åŠ è½½äº‹ä»¶                                               â”‚     â”‚
â”‚    â”‚     script.onload = script.onerror = (event) => {               â”‚     â”‚
â”‚    â”‚       clearTimeout(timeout)                                     â”‚     â”‚
â”‚    â”‚       done(event)                                               â”‚     â”‚
â”‚    â”‚     }                                                           â”‚     â”‚
â”‚    â”‚                                                                 â”‚     â”‚
â”‚    â”‚     // è®¾ç½® 120 ç§’è¶…æ—¶                                             â”‚     â”‚
â”‚    â”‚     let timeout = setTimeout(() => {                            â”‚     â”‚
â”‚    â”‚       done({ type: 'timeout' })                                 â”‚     â”‚
â”‚    â”‚     }, 120000)                                                  â”‚     â”‚
â”‚    â”‚                                                                 â”‚     â”‚
â”‚    â”‚     // æ’å…¥åˆ° <head>                                              â”‚     â”‚
â”‚    â”‚     document.head.appendChild(script)                           â”‚     â”‚
â”‚    â”‚   }                                                             â”‚     â”‚
â”‚    â”‚                                                                 â”‚     â”‚
â”‚    â”‚   // æ”¯æŒå¤šä¸ªå›è°ƒï¼ˆé˜²æ­¢å¹¶å‘è¯·æ±‚ï¼‰                                   â”‚     â”‚
â”‚    â”‚   inProgress[url].push(done)                                    â”‚     â”‚
â”‚    â”‚ }                                                               â”‚     â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                             â”‚
â”‚  æ‰§è¡Œåçš„ç»“æœï¼š                                                               â”‚
â”‚    âœ… <head> ä¸­æ’å…¥äº† <script src="https://xxx/kdocs-mf.js">                 â”‚
â”‚    âœ… è„šæœ¬æ‰§è¡Œï¼Œæ³¨å†Œäº† window.kdocs å¯¹è±¡                                       â”‚
â”‚                                                                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                                                                             â”‚
â”‚  æ­¥éª¤ 3: åˆå§‹åŒ–å®¹å™¨ï¼ˆè°ƒç”¨ initContainerï¼‰                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚                                                                             â”‚
â”‚    if (!container.__initialized) {                                         â”‚
â”‚      await initContainer(container, shareScope, shareModule)               â”‚
â”‚    }                                                                        â”‚
â”‚                                                                             â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚    â”‚ initContainer å†…éƒ¨å®ç°ï¼š                                         â”‚     â”‚
â”‚    â”‚                                                                 â”‚     â”‚
â”‚    â”‚ async function initContainer(                                   â”‚     â”‚
â”‚    â”‚   container,                                                    â”‚     â”‚
â”‚    â”‚   shareScope = 'default',                                       â”‚     â”‚
â”‚    â”‚   shareModule = {}                                              â”‚     â”‚
â”‚    â”‚ ) {                                                             â”‚     â”‚
â”‚    â”‚   let share = {}                                                â”‚     â”‚
â”‚    â”‚                                                                 â”‚     â”‚
â”‚    â”‚   // å¦‚æœ Host æœ‰ webpack runtimeï¼Œè·å–å…±äº«ä½œç”¨åŸŸ                 â”‚     â”‚
â”‚    â”‚   if (typeof __webpack_init_sharing__ !== 'undefined') {        â”‚     â”‚
â”‚    â”‚     await __webpack_init_sharing__(shareScope)                  â”‚     â”‚
â”‚    â”‚     share = __webpack_share_scopes__[shareScope]                â”‚     â”‚
â”‚    â”‚   }                                                             â”‚     â”‚
â”‚    â”‚                                                                 â”‚     â”‚
â”‚    â”‚   // åˆå¹¶è‡ªå®šä¹‰å…±äº«æ¨¡å—                                           â”‚     â”‚
â”‚    â”‚   for (let k in shareModule) {                                  â”‚     â”‚
â”‚    â”‚     share[k] = shareModule[k]                                   â”‚     â”‚
â”‚    â”‚   }                                                             â”‚     â”‚
â”‚    â”‚                                                                 â”‚     â”‚
â”‚    â”‚   // æ ‡è®°å·²åˆå§‹åŒ–                                                â”‚     â”‚
â”‚    â”‚   container.__initialized = true                                â”‚     â”‚
â”‚    â”‚                                                                 â”‚     â”‚
â”‚    â”‚   // è°ƒç”¨è¿œç¨‹å®¹å™¨çš„ init æ–¹æ³•                                      â”‚     â”‚
â”‚    â”‚   await container.init(share)                                   â”‚     â”‚
â”‚    â”‚ }                                                               â”‚     â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                             â”‚
â”‚  å…³é”®æ•°æ®ä¼ é€’ï¼š                                                               â”‚
â”‚                                                                             â”‚
â”‚    share = {                                                               â”‚
â”‚      vue: {                                                                â”‚
â”‚        '2.6.14': {                                                         â”‚
â”‚          get: () => require('vue'),  // è¿”å› Host çš„ Vue                   â”‚
â”‚          loaded: true,                                                     â”‚
â”‚          from: 'host'                                                      â”‚
â”‚        }                                                                   â”‚
â”‚      },                                                                    â”‚
â”‚      vuex: { ... },                                                        â”‚
â”‚      // å…¶ä»–å…±äº«ä¾èµ–...                                                     â”‚
â”‚    }                                                                       â”‚
â”‚                                                                             â”‚
â”‚    container.init(share) â† ä¼ é€’ç»™ Remote                                    â”‚
â”‚                                                                             â”‚
â”‚  æ‰§è¡Œåçš„ç»“æœï¼š                                                               â”‚
â”‚    âœ… Remote å®¹å™¨çŸ¥é“äº† Host æœ‰å“ªäº›å¯ç”¨çš„å…±äº«ä¾èµ–                              â”‚
â”‚    âœ… container.__initialized = true                                        â”‚
â”‚                                                                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                                                                             â”‚
â”‚  æ­¥éª¤ 4: è·å–æ¨¡å—å·¥å‚å‡½æ•°                                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚                                                                             â”‚
â”‚    // ç¡®ä¿æ¨¡å—åä»¥ './' å¼€å¤´                                                 â”‚
â”‚    if (!exposeModuleName.startsWith('./')) {                               â”‚
â”‚      exposeModuleName = `./${exposeModuleName}`                            â”‚
â”‚    }                                                                       â”‚
â”‚                                                                             â”‚
â”‚    // è°ƒç”¨å®¹å™¨çš„ get æ–¹æ³•                                                    â”‚
â”‚    const factory = await container.get(exposeModuleName)                   â”‚
â”‚                                                                             â”‚
â”‚  container.get('./UikitFinderV2') å†…éƒ¨åšäº†ä»€ä¹ˆï¼Ÿ                             â”‚
â”‚                                                                             â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚    â”‚ // Remote å®¹å™¨å†…éƒ¨ï¼ˆç”± webpack ç”Ÿæˆï¼‰                             â”‚     â”‚
â”‚    â”‚                                                                 â”‚     â”‚
â”‚    â”‚ const moduleMap = {                                             â”‚     â”‚
â”‚    â”‚   './UikitFinderV2': () => {                                    â”‚     â”‚
â”‚    â”‚     return import('./chunk-UikitFinderV2.js')  // åŠ¨æ€åŠ è½½ chunk â”‚     â”‚
â”‚    â”‚       .then(module => {                                         â”‚     â”‚
â”‚    â”‚         // è§£æä¾èµ–ï¼ˆä» sharedScope è·å– Vue ç­‰ï¼‰                â”‚     â”‚
â”‚    â”‚         return module                                           â”‚     â”‚
â”‚    â”‚       })                                                        â”‚     â”‚
â”‚    â”‚   }                                                             â”‚     â”‚
â”‚    â”‚ }                                                               â”‚     â”‚
â”‚    â”‚                                                                 â”‚     â”‚
â”‚    â”‚ container.get = function(moduleName) {                          â”‚     â”‚
â”‚    â”‚   return moduleMap[moduleName]()                                â”‚     â”‚
â”‚    â”‚ }                                                               â”‚     â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                             â”‚
â”‚  æ­¤æ—¶è§¦å‘ç¬¬äºŒæ¬¡ç½‘ç»œè¯·æ±‚ï¼š                                                     â”‚
â”‚    GET https://xxx/chunk-UikitFinderV2.js                                  â”‚
â”‚                                                                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                                                                             â”‚
â”‚  æ­¥éª¤ 5: æ‰§è¡Œå·¥å‚å‡½æ•°ï¼Œè¿”å›æ¨¡å—                                               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚                                                                             â”‚
â”‚    const module = factory()                                                â”‚
â”‚                                                                             â”‚
â”‚  factory() å†…éƒ¨æ‰§è¡Œï¼š                                                        â”‚
â”‚                                                                             â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚    â”‚ // chunk-UikitFinderV2.js çš„å†…å®¹                                 â”‚     â”‚
â”‚    â”‚                                                                 â”‚     â”‚
â”‚    â”‚ function factory() {                                            â”‚     â”‚
â”‚    â”‚   // ä» sharedScope è·å– Vueï¼ˆä¸æ˜¯é‡æ–°åŠ è½½ï¼ï¼‰                    â”‚     â”‚
â”‚    â”‚   const Vue = __webpack_require__('vue')  // â†’ Host çš„ Vue      â”‚     â”‚
â”‚    â”‚   const Vuex = __webpack_require__('vuex') // â†’ Host çš„ Vuex    â”‚     â”‚
â”‚    â”‚                                                                 â”‚     â”‚
â”‚    â”‚   // å®šä¹‰ç»„ä»¶                                                    â”‚     â”‚
â”‚    â”‚   const UikitFinderV2 = {                                       â”‚     â”‚
â”‚    â”‚     mount(options, container) {                                 â”‚     â”‚
â”‚    â”‚       const vm = new Vue({ ... })  // ä½¿ç”¨ Host çš„ Vue å®ä¾‹      â”‚     â”‚
â”‚    â”‚     }                                                           â”‚     â”‚
â”‚    â”‚   }                                                             â”‚     â”‚
â”‚    â”‚                                                                 â”‚     â”‚
â”‚    â”‚   return { default: UikitFinderV2 }                             â”‚     â”‚
â”‚    â”‚ }                                                               â”‚     â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                                                                             â”‚
â”‚  æ­¥éª¤ 6: è¿”å›æ¨¡å—ç»™è°ƒç”¨æ–¹                                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚                                                                             â”‚
â”‚    return module                                                           â”‚
â”‚                                                                             â”‚
â”‚  è°ƒç”¨æ–¹æ”¶åˆ°ï¼š                                                                 â”‚
â”‚    {                                                                       â”‚
â”‚      default: UikitFinderV2,  // å®é™…çš„ç»„ä»¶å¯¹è±¡                             â”‚
â”‚      mount: function() { ... }                                             â”‚
â”‚    }                                                                       â”‚
â”‚                                                                             â”‚
â”‚  âœ… å®Œæˆï¼å¯ä»¥è°ƒç”¨ module.mount() æŒ‚è½½ç»„ä»¶äº†                                   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å®é™…ä½¿ç”¨ç¤ºä¾‹ï¼ˆä¸šåŠ¡ä»£ç ï¼‰ï¼š**

```javascript
// åœ¨ apps-public é¡¹ç›®ä¸­
import { loadRemoteModule } from '@kso/mf'

export default {
  methods: {
    async openFinder() {
      try {
        // 1. åŠ è½½è¿œç¨‹æ¨¡å—
        const remoteModule = await loadRemoteModule({
          containerName: 'kdocs',
          exposeModuleName: 'UikitFinderV2',
          url: 'https://cdn.example.com/mf/kdocs-mf.js',
          manifest: 'https://cdn.example.com/mf/manifest.json'
        })
        
        // 2. è·å–å®é™…ç»„ä»¶
        const UikitFinderV2 = remoteModule.default || remoteModule
        
        // 3. æŒ‚è½½ç»„ä»¶
        UikitFinderV2.mount({
          userId: this.userId,
          onSelect: (files) => {
            console.log('é€‰ä¸­çš„æ–‡ä»¶:', files)
            this.selectedFiles = files
          }
        }, this.$refs.container)
        
      } catch (err) {
        console.error('åŠ è½½è¿œç¨‹æ¨¡å—å¤±è´¥:', err)
        // é™çº§æ–¹æ¡ˆï¼šä½¿ç”¨æœ¬åœ°ç»„ä»¶
        this.loadLocalFinder()
      }
    }
  }
}
```

**å…³é”®ä¼˜åŒ–ç‚¹ï¼š**

```javascript
// 1. ç¼“å­˜æœºåˆ¶ï¼šé¿å…é‡å¤åŠ è½½
if (window[containerName]) {
  // å®¹å™¨å·²å­˜åœ¨ï¼Œç›´æ¥ä½¿ç”¨ï¼Œä¸å‘èµ·ç½‘ç»œè¯·æ±‚
}

// 2. é˜²æ­¢å¹¶å‘é‡å¤è¯·æ±‚
const inProgress = {}
if (inProgress[url]) {
  inProgress[url].push(callback)  // å¤ç”¨å·²ç»åœ¨åŠ è½½çš„è¯·æ±‚
} else {
  inProgress[url] = [callback]    // åˆ›å»ºæ–°è¯·æ±‚
}

// 3. è¶…æ—¶æ§åˆ¶
setTimeout(() => {
  // 120 ç§’è¶…æ—¶ï¼Œé˜²æ­¢ä¸€ç›´ç­‰å¾…
}, 120000)

// 4. SRIï¼ˆå­èµ„æºå®Œæ•´æ€§ï¼‰æ ¡éªŒ
if (manifest?.entry?.integrity) {
  script.setAttribute('integrity', 'sha384-xxx...')
  script.setAttribute('crossorigin', 'anonymous')
  // ç¡®ä¿åŠ è½½çš„æ–‡ä»¶æ²¡æœ‰è¢«ç¯¡æ”¹
}

// 5. é”™è¯¯å¤„ç†
try {
  await loadRemoteModule({ ... })
} catch (err) {
  // ç½‘ç»œé”™è¯¯ã€åŠ è½½å¤±è´¥ã€æ¨¡å—ä¸å­˜åœ¨ç­‰
  // å¯ä»¥é™çº§åˆ°æœ¬åœ°ç»„ä»¶
}
```

**å†…å­˜å ç”¨å¯¹æ¯”ï¼š**

```
åœºæ™¯ 1: ä¸ä½¿ç”¨ Module Federationï¼ˆä¼ ç»Ÿæ–¹å¼ï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Host åº”ç”¨                                   â”‚
â”‚ - Vue 2.6.14 (80KB)                         â”‚
â”‚ - Vuex 3.6.2 (20KB)                         â”‚
â”‚ - ä¸šåŠ¡ä»£ç  (500KB)                           â”‚
â”‚                                             â”‚
â”‚ Remote åº”ç”¨ï¼ˆæ‰“åŒ…è¿›æ¥ï¼‰                       â”‚
â”‚ - Vue 2.6.14 (80KB)  â† é‡å¤åŠ è½½ï¼            â”‚
â”‚ - Vuex 3.6.2 (20KB)  â† é‡å¤åŠ è½½ï¼            â”‚
â”‚ - ç»„ä»¶ä»£ç  (200KB)                           â”‚
â”‚                                             â”‚
â”‚ æ€»è®¡: 900KB                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åœºæ™¯ 2: ä½¿ç”¨ Module Federation
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Host åº”ç”¨                                   â”‚
â”‚ - Vue 2.6.14 (80KB)  â† å…±äº«                 â”‚
â”‚ - Vuex 3.6.2 (20KB)  â† å…±äº«                 â”‚
â”‚ - ä¸šåŠ¡ä»£ç  (500KB)                           â”‚
â”‚                                             â”‚
â”‚ Remote åº”ç”¨                                 â”‚
â”‚ - ä½¿ç”¨ Host çš„ Vue/Vuex â† ä¸é¢å¤–åŠ è½½          â”‚
â”‚ - ç»„ä»¶ä»£ç  (200KB)                           â”‚
â”‚                                             â”‚
â”‚ æ€»è®¡: 800KB ï¼ˆèŠ‚çœ 100KBï¼‰                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âœ… èŠ‚çœå†…å­˜å’Œæµé‡
âœ… å‡å°‘è§£ææ—¶é—´
âœ… é¿å…å¤šä¸ª Vue å®ä¾‹å†²çª
```

---

#### ğŸ“¦ @kso/mf é¡¹ç›®è¯¦è§£

**é¡¹ç›®å®šä½**ï¼šModule Federation çš„è¿è¡Œæ—¶åŠ è½½å·¥å…·åº“ï¼Œæ˜¯æ•´ä¸ªå¾®å‰ç«¯æ¶æ„çš„**æ ¸å¿ƒåŸºç¡€è®¾æ–½**ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          @kso/mf é¡¹ç›®æ¶æ„                                     â”‚
â”‚                                                                             â”‚
â”‚  é¡¹ç›®ä¿¡æ¯ï¼š                                                                   â”‚
â”‚  - åŒ…åï¼š@kso/mf                                                             â”‚
â”‚  - ç‰ˆæœ¬ï¼šv1.0.124                                                            â”‚
â”‚  - æè¿°ï¼šåŠ¨æ€åŠ è½½è¿œç¨‹æ¨¡å—å‡½æ•°                                                  â”‚
â”‚  - ä½ç½®ï¼škso-indep/packages/mf                                               â”‚
â”‚                                                                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                                                                             â”‚
â”‚  æ ¸å¿ƒæ–‡ä»¶ç»“æ„ï¼š                                                                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
â”‚                                                                             â”‚
â”‚    packages/mf/                                                             â”‚
â”‚    â”œâ”€â”€ src/                                                                 â”‚
â”‚    â”‚   â”œâ”€â”€ index.ts        # æ ¸å¿ƒåŠ è½½é€»è¾‘ï¼ˆ345è¡Œï¼‰                           â”‚
â”‚    â”‚   â”œâ”€â”€ log.ts          # è°ƒè¯•æ—¥å¿—å·¥å…·                                    â”‚
â”‚    â”‚   â”œâ”€â”€ prefetch.ts     # èµ„æºé¢„åŠ è½½ï¼ˆå·²åºŸå¼ƒï¼‰                             â”‚
â”‚    â”‚   â””â”€â”€ utils.ts        # URL å¤„ç†å·¥å…·                                    â”‚
â”‚    â”œâ”€â”€ dist/               # ç¼–è¯‘äº§ç‰©                                        â”‚
â”‚    â”‚   â”œâ”€â”€ index.js        # CommonJS æ ¼å¼                                  â”‚
â”‚    â”‚   â”œâ”€â”€ index.mjs       # ESM æ ¼å¼                                       â”‚
â”‚    â”‚   â””â”€â”€ index.d.ts      # TypeScript ç±»å‹å®šä¹‰                            â”‚
â”‚    â”œâ”€â”€ package.json                                                         â”‚
â”‚    â”œâ”€â”€ tsconfig.json                                                        â”‚
â”‚    â””â”€â”€ README.md                                                            â”‚
â”‚                                                                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                                                                             â”‚
â”‚  æ ¸å¿ƒåŠŸèƒ½æ¨¡å—ï¼ˆ6ä¸ªï¼‰ï¼š                                                          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
â”‚                                                                             â”‚
â”‚  1ï¸âƒ£ loadRemoteModule() - ä¸»å‡½æ•°                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ ä½œç”¨ï¼šä¸€é”®åŠ è½½è¿œç¨‹æ¨¡å—                                            â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚ export async function loadRemoteModule({                        â”‚       â”‚
â”‚  â”‚   containerName,     // å®¹å™¨åç§°                                 â”‚       â”‚
â”‚  â”‚   exposeModuleName,  // æ¨¡å—åç§°                                 â”‚       â”‚
â”‚  â”‚   url,               // å…¥å£æ–‡ä»¶åœ°å€                              â”‚       â”‚
â”‚  â”‚   shareScope,        // å…±äº«ä½œç”¨åŸŸï¼ˆå¯é€‰ï¼‰                         â”‚       â”‚
â”‚  â”‚   shareModule,       // å…±äº«ä¾èµ–ï¼ˆå¯é€‰ï¼‰                           â”‚       â”‚
â”‚  â”‚   manifest           // SRI æ ¡éªŒï¼ˆå¯é€‰ï¼‰                           â”‚       â”‚
â”‚  â”‚ }) {                                                            â”‚       â”‚
â”‚  â”‚   // 1. åŠ è½½å®¹å™¨                                                 â”‚       â”‚
â”‚  â”‚   await loadContainer(...)                                      â”‚       â”‚
â”‚  â”‚   // 2. è·å–æ¨¡å—                                                 â”‚       â”‚
â”‚  â”‚   return getModule(container, exposeModuleName)                 â”‚       â”‚
â”‚  â”‚ }                                                               â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚ ç‰¹ç‚¹ï¼š                                                            â”‚       â”‚
â”‚  â”‚ âœ… è‡ªåŠ¨å¤„ç†å®¹å™¨åŠ è½½                                                â”‚       â”‚
â”‚  â”‚ âœ… è‡ªåŠ¨åˆå§‹åŒ–å…±äº«ä¾èµ–                                              â”‚       â”‚
â”‚  â”‚ âœ… è‡ªåŠ¨æ ¼å¼åŒ–æ¨¡å—åï¼ˆåŠ  ./ å‰ç¼€ï¼‰                                   â”‚       â”‚
â”‚  â”‚ âœ… æ”¯æŒæ€§èƒ½è®¡æ—¶ï¼ˆURL åŠ  ?mfdebug æŸ¥çœ‹ï¼‰                            â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                             â”‚
â”‚  2ï¸âƒ£ loadContainer() - å®¹å™¨åŠ è½½                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ ä½œç”¨ï¼šåŠ è½½å¹¶åˆå§‹åŒ–è¿œç¨‹å®¹å™¨                                         â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚ export async function loadContainer({                           â”‚       â”‚
â”‚  â”‚   containerName, url, shareScope, shareModule, manifest         â”‚       â”‚
â”‚  â”‚ }) {                                                            â”‚       â”‚
â”‚  â”‚   // æ£€æŸ¥å®¹å™¨æ˜¯å¦å·²å­˜åœ¨                                           â”‚       â”‚
â”‚  â”‚   if (window[containerName] === undefined) {                    â”‚       â”‚
â”‚  â”‚     // åŠ è½½è¿œç¨‹å…¥å£æ–‡ä»¶                                           â”‚       â”‚
â”‚  â”‚     await getRemoteEntry(containerName, url, manifest)          â”‚       â”‚
â”‚  â”‚   }                                                             â”‚       â”‚
â”‚  â”‚   // åˆå§‹åŒ–å®¹å™¨                                                  â”‚       â”‚
â”‚  â”‚   await initContainer(window[containerName], ...)               â”‚       â”‚
â”‚  â”‚   return window[containerName]                                  â”‚       â”‚
â”‚  â”‚ }                                                               â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚ ç‰¹ç‚¹ï¼š                                                            â”‚       â”‚
â”‚  â”‚ âœ… é¿å…é‡å¤åŠ è½½å®¹å™¨                                                â”‚       â”‚
â”‚  â”‚ âœ… æ”¯æŒ manifest.jsonï¼ˆç”¨äº SRIï¼‰                                 â”‚       â”‚
â”‚  â”‚ âœ… è‡ªåŠ¨å¤„ç† manifest URL åˆ°å¯¹è±¡çš„è½¬æ¢                              â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                             â”‚
â”‚  3ï¸âƒ£ getRemoteEntry() - è·å–è¿œç¨‹å…¥å£                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ ä½œç”¨ï¼šé€šè¿‡ fetch + script æ³¨å…¥çš„æ–¹å¼åŠ è½½è¿œç¨‹å…¥å£æ–‡ä»¶                 â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚ export async function getRemoteEntry(                           â”‚       â”‚
â”‚  â”‚   name, url, manifest                                           â”‚       â”‚
â”‚  â”‚ ) {                                                             â”‚       â”‚
â”‚  â”‚   // å·²åŠ è½½ï¼Œç›´æ¥è¿”å›                                             â”‚       â”‚
â”‚  â”‚   if (window[name]) return window[name]                         â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚   // ä½¿ç”¨ fetch ä¸‹è½½ï¼ˆæ”¯æŒè‡ªå®šä¹‰ headerï¼‰                          â”‚       â”‚
â”‚  â”‚   const scriptText = await loadScriptText(url, {                â”‚       â”‚
â”‚  â”‚     integrity: manifest?.entry?.integrity,  // SRI              â”‚       â”‚
â”‚  â”‚     mode: 'cors'                                                â”‚       â”‚
â”‚  â”‚   })                                                            â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚   // æ‰§è¡Œè„šæœ¬ï¼ˆåˆ›å»º script æ ‡ç­¾æ³¨å…¥ï¼‰                              â”‚       â”‚
â”‚  â”‚   executeScript(name, scriptText)                               â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚   return window[name]                                           â”‚       â”‚
â”‚  â”‚ }                                                               â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚ ä¸ºä»€ä¹ˆç”¨ fetch è€Œä¸æ˜¯ç›´æ¥åˆ›å»º <script>ï¼Ÿ                           â”‚       â”‚
â”‚  â”‚ âœ… å¯ä»¥æ·»åŠ è‡ªå®šä¹‰è¯·æ±‚å¤´ï¼ˆå¦‚é‰´æƒ tokenï¼‰                             â”‚       â”‚
â”‚  â”‚ âœ… æ›´å¥½çš„é”™è¯¯å¤„ç†                                                  â”‚       â”‚
â”‚  â”‚ âœ… æ”¯æŒ SRI å…œåº•ï¼ˆç¬¬ä¸€æ¬¡å¤±è´¥ï¼Œå»æ‰ integrity é‡è¯•ï¼‰                 â”‚       â”‚
â”‚  â”‚ âœ… æ”¯æŒèŠ‚æµï¼ˆé˜²æ­¢å¹¶å‘é‡å¤è¯·æ±‚ï¼‰                                      â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                             â”‚
â”‚  4ï¸âƒ£ initContainer() - åˆå§‹åŒ–å®¹å™¨                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ ä½œç”¨ï¼šåˆå§‹åŒ–å…±äº«ä¾èµ–æ± ï¼Œè®© Remote çŸ¥é“ Host æœ‰å“ªäº›å¯ç”¨ä¾èµ–           â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚ async function initContainer(                                   â”‚       â”‚
â”‚  â”‚   container, shareScope = 'default', shareModule = {}           â”‚       â”‚
â”‚  â”‚ ) {                                                             â”‚       â”‚
â”‚  â”‚   // å·²åˆå§‹åŒ–ï¼Œè·³è¿‡                                               â”‚       â”‚
â”‚  â”‚   if (container.__initialized) return                           â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚   let share = {}                                                â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚   // å¦‚æœæ˜¯ Webpack 5 ç¯å¢ƒï¼Œè·å– webpack çš„å…±äº«ä½œç”¨åŸŸ              â”‚       â”‚
â”‚  â”‚   if (typeof __webpack_init_sharing__ !== 'undefined') {        â”‚       â”‚
â”‚  â”‚     await __webpack_init_sharing__(shareScope)                  â”‚       â”‚
â”‚  â”‚     share = __webpack_share_scopes__[shareScope]                â”‚       â”‚
â”‚  â”‚   }                                                             â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚   // åˆå¹¶è‡ªå®šä¹‰å…±äº«æ¨¡å—                                           â”‚       â”‚
â”‚  â”‚   for (let k in shareModule) {                                  â”‚       â”‚
â”‚  â”‚     share[k] = shareModule[k]                                   â”‚       â”‚
â”‚  â”‚   }                                                             â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚   // æ ‡è®°å·²åˆå§‹åŒ–ï¼ˆæ—¶åºå¾ˆé‡è¦ï¼ï¼‰                                  â”‚       â”‚
â”‚  â”‚   container.__initialized = true                                â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚   // è°ƒç”¨ Remote å®¹å™¨çš„ init æ–¹æ³•                                 â”‚       â”‚
â”‚  â”‚   await container.init(share)                                   â”‚       â”‚
â”‚  â”‚ }                                                               â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚ æ—¶åºé—®é¢˜ï¼š                                                        â”‚       â”‚
â”‚  â”‚ âš ï¸ å¿…é¡»å…ˆè®¾ç½® __initialized = trueï¼Œå†è°ƒç”¨ container.init()       â”‚       â”‚
â”‚  â”‚ âš ï¸ å¦åˆ™å¹¶å‘åŠ è½½å¤šä¸ªæ¨¡å—æ—¶ä¼šé‡å¤åˆå§‹åŒ–ï¼ŒæŠ¥é”™ï¼š                       â”‚       â”‚
â”‚  â”‚    "Container initialization failed as it has already been      â”‚       â”‚
â”‚  â”‚     initialized with a different share scope"                   â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                             â”‚
â”‚  5ï¸âƒ£ getModule() - è·å–æ¨¡å—                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ ä½œç”¨ï¼šä»å®¹å™¨ä¸­è·å–å…·ä½“çš„æ¨¡å—                                       â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚ export async function getModule(                                â”‚       â”‚
â”‚  â”‚   container, exposeModuleName                                   â”‚       â”‚
â”‚  â”‚ ) {                                                             â”‚       â”‚
â”‚  â”‚   // è·å–å·¥å‚å‡½æ•°                                                â”‚       â”‚
â”‚  â”‚   const factory = await container.get(exposeModuleName)         â”‚       â”‚
â”‚  â”‚   // æ‰§è¡Œå·¥å‚å‡½æ•°ï¼Œè¿”å›æ¨¡å—                                        â”‚       â”‚
â”‚  â”‚   const module = factory()                                      â”‚       â”‚
â”‚  â”‚   return module                                                 â”‚       â”‚
â”‚  â”‚ }                                                               â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚ container.get() ä¼šè§¦å‘ï¼š                                          â”‚       â”‚
â”‚  â”‚ 1. åŠ¨æ€ import('./chunk-xxx.js')                                â”‚       â”‚
â”‚  â”‚ 2. ä» sharedScope è·å–ä¾èµ–                                        â”‚       â”‚
â”‚  â”‚ 3. è¿”å›æ¨¡å—å¯¹è±¡                                                   â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                             â”‚
â”‚  6ï¸âƒ£ loadScript() - åº•å±‚è„šæœ¬åŠ è½½ï¼ˆä¿ç•™ä½†ä¸å¸¸ç”¨ï¼‰                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ ä½œç”¨ï¼šä¼ ç»Ÿçš„ <script> æ ‡ç­¾åŠ è½½æ–¹å¼                                 â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚ export function loadScript(url, done, key, attributes) {        â”‚       â”‚
â”‚  â”‚   // æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨                                               â”‚       â”‚
â”‚  â”‚   let script = findExistingScript(url, key)                     â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚   if (!script) {                                                â”‚       â”‚
â”‚  â”‚     script = document.createElement('script')                   â”‚       â”‚
â”‚  â”‚     script.src = url                                            â”‚       â”‚
â”‚  â”‚     script.setAttribute('data-webpack', key)                    â”‚       â”‚
â”‚  â”‚     document.head.appendChild(script)                           â”‚       â”‚
â”‚  â”‚   }                                                             â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚   // å¹¶å‘è¯·æ±‚åˆå¹¶                                                â”‚       â”‚
â”‚  â”‚   inProgress[url].push(done)                                    â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚   // 120 ç§’è¶…æ—¶                                                  â”‚       â”‚
â”‚  â”‚   setTimeout(() => done({ type: 'timeout' }), 120000)           â”‚       â”‚
â”‚  â”‚ }                                                               â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚ æ³¨æ„ï¼šç°åœ¨ä¸»è¦ä½¿ç”¨ getRemoteEntry() ä»£æ›¿                           â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                                                                             â”‚
â”‚  è¾…åŠ©åŠŸèƒ½ï¼š                                                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
â”‚                                                                             â”‚
â”‚  ğŸ› createLogger() - è°ƒè¯•æ—¥å¿—                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ ä½œç”¨ï¼šæ¡ä»¶æ€§è¾“å‡ºæ—¥å¿—ï¼Œé¿å…ç”Ÿäº§ç¯å¢ƒæ±¡æŸ“æ§åˆ¶å°                         â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚ export function createLogger() {                                â”‚       â”‚
â”‚  â”‚   const logger = {}                                             â”‚       â”‚
â”‚  â”‚   // æ£€æŸ¥ URL å‚æ•°                                               â”‚       â”‚
â”‚  â”‚   const isDebug = window.location.search.includes('mfdebug')    â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚   for (let key in console) {                                    â”‚       â”‚
â”‚  â”‚     logger[key] = isDebug ? console[key] : () => {}             â”‚       â”‚
â”‚  â”‚   }                                                             â”‚       â”‚
â”‚  â”‚   return logger                                                 â”‚       â”‚
â”‚  â”‚ }                                                               â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚ ä½¿ç”¨æ–¹æ³•ï¼š                                                        â”‚       â”‚
â”‚  â”‚ - è®¿é—® URL + ?mfdebug                                            â”‚       â”‚
â”‚  â”‚ - æ§åˆ¶å°ä¼šæ˜¾ç¤ºï¼š                                                  â”‚       â”‚
â”‚  â”‚   "åŠ è½½è¿œç¨‹æ¨¡å—:kdocsUikitFinderV2: 150ms"                        â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                             â”‚
â”‚  ğŸ”„ throttle() - è¯·æ±‚èŠ‚æµ                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ ä½œç”¨ï¼šé˜²æ­¢å¹¶å‘é‡å¤è¯·æ±‚åŒä¸€èµ„æº                                     â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚ async function throttle(id, fn) {                               â”‚       â”‚
â”‚  â”‚   if (inProgress[id]) {                                         â”‚       â”‚
â”‚  â”‚     // å·²æœ‰è¯·æ±‚åœ¨è¿›è¡Œä¸­ï¼Œå¤ç”¨è¿™ä¸ª Promise                          â”‚       â”‚
â”‚  â”‚     return inProgress[id][0]                                    â”‚       â”‚
â”‚  â”‚   }                                                             â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚   // åˆ›å»ºæ–°è¯·æ±‚                                                  â”‚       â”‚
â”‚  â”‚   const loader = fn()                                           â”‚       â”‚
â”‚  â”‚   inProgress[id] = [loader]                                     â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚   const res = await loader                                      â”‚       â”‚
â”‚  â”‚   delete inProgress[id]  // æ¸…ç†                                 â”‚       â”‚
â”‚  â”‚   return res                                                    â”‚       â”‚
â”‚  â”‚ }                                                               â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚ åœºæ™¯ï¼š                                                            â”‚       â”‚
â”‚  â”‚ ç”¨æˆ·å¿«é€Ÿç‚¹å‡»ä¸¤æ¬¡"é€‰æ‹©æ–‡ä»¶"æŒ‰é’®                                      â”‚       â”‚
â”‚  â”‚ â†’ åªä¼šå‘èµ·ä¸€æ¬¡ç½‘ç»œè¯·æ±‚                                             â”‚       â”‚
â”‚  â”‚ â†’ ä¸¤æ¬¡è°ƒç”¨å…±äº«åŒä¸€ä¸ª Promise                                       â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                                                                             â”‚
â”‚  å®Œæ•´è°ƒç”¨æµç¨‹ç¤ºä¾‹ï¼š                                                           â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
â”‚                                                                             â”‚
â”‚  // ä¸šåŠ¡ä»£ç                                                                 â”‚
â”‚  import { loadRemoteModule } from '@kso/mf'                                 â”‚
â”‚                                                                             â”‚
â”‚  const module = await loadRemoteModule({                                    â”‚
â”‚    containerName: 'kdocs',                                                  â”‚
â”‚    exposeModuleName: 'UikitFinderV2',                                       â”‚
â”‚    url: 'https://cdn.example.com/mf/kdocs-mf.js',                           â”‚
â”‚    manifest: 'https://cdn.example.com/mf/manifest.json',                    â”‚
â”‚    shareModule: {                                                           â”‚
â”‚      vue: {                                                                 â”‚
â”‚        '2.6.14': {                                                          â”‚
â”‚          from: 'host',                                                      â”‚
â”‚          get: () => Promise.resolve(() => ({ default: Vue })),              â”‚
â”‚          loaded: 1                                                          â”‚
â”‚        }                                                                    â”‚
â”‚      }                                                                      â”‚
â”‚    }                                                                        â”‚
â”‚  })                                                                         â”‚
â”‚                                                                             â”‚
â”‚  å†…éƒ¨æ‰§è¡Œé¡ºåºï¼š                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ 1. loadRemoteModule()                                           â”‚       â”‚
â”‚  â”‚    â†“                                                            â”‚       â”‚
â”‚  â”‚ 2. normalizeOptions() - æ ¼å¼åŒ–å‚æ•°                               â”‚       â”‚
â”‚  â”‚    â†“                                                            â”‚       â”‚
â”‚  â”‚ 3. loadContainer()                                              â”‚       â”‚
â”‚  â”‚    â”œâ”€ throttle() - é˜²æ­¢é‡å¤è¯·æ±‚ manifest                         â”‚       â”‚
â”‚  â”‚    â”œâ”€ getRemoteEntry()                                          â”‚       â”‚
â”‚  â”‚    â”‚  â”œâ”€ throttle() - é˜²æ­¢é‡å¤è¯·æ±‚å…¥å£æ–‡ä»¶                        â”‚       â”‚
â”‚  â”‚    â”‚  â”œâ”€ loadScriptText() - fetch ä¸‹è½½                           â”‚       â”‚
â”‚  â”‚    â”‚  â”‚  â””â”€ fetch() with SRI                                    â”‚       â”‚
â”‚  â”‚    â”‚  â”‚     â””â”€ å¤±è´¥è‡ªåŠ¨é‡è¯•ï¼ˆå»æ‰ integrityï¼‰                     â”‚       â”‚
â”‚  â”‚    â”‚  â””â”€ executeScript() - æ³¨å…¥æ‰§è¡Œ                              â”‚       â”‚
â”‚  â”‚    â”‚     â””â”€ window.kdocs å·²åˆ›å»º                                  â”‚       â”‚
â”‚  â”‚    â””â”€ initContainer()                                           â”‚       â”‚
â”‚  â”‚       â”œâ”€ __webpack_init_sharing__() - è·å– webpack å…±äº«æ±         â”‚       â”‚
â”‚  â”‚       â”œâ”€ åˆå¹¶ shareModule                                        â”‚       â”‚
â”‚  â”‚       â””â”€ container.init(share) - ä¼ é€’ç»™ Remote                   â”‚       â”‚
â”‚  â”‚    â†“                                                            â”‚       â”‚
â”‚  â”‚ 4. getModule()                                                  â”‚       â”‚
â”‚  â”‚    â”œâ”€ container.get('./UikitFinderV2')                          â”‚       â”‚
â”‚  â”‚    â”‚  â””â”€ åŠ¨æ€ import('./chunk-UikitFinderV2.js')                â”‚       â”‚
â”‚  â”‚    â””â”€ factory() - æ‰§è¡Œå·¥å‚å‡½æ•°                                    â”‚       â”‚
â”‚  â”‚    â†“                                                            â”‚       â”‚
â”‚  â”‚ 5. è¿”å›æ¨¡å—                                                      â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                                                                             â”‚
â”‚  å…³é”®ç‰¹æ€§æ€»ç»“ï¼š                                                               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
â”‚                                                                             â”‚
â”‚  âœ… è‡ªåŠ¨åŒ–ç¨‹åº¦é«˜ï¼šä¸€ä¸ªå‡½æ•°æå®šæ‰€æœ‰æµç¨‹                                          â”‚
â”‚  âœ… é˜²é‡æœºåˆ¶ï¼šå®¹å™¨ç¼“å­˜ + è¯·æ±‚èŠ‚æµ                                              â”‚
â”‚  âœ… æ€§èƒ½ä¼˜åŒ–ï¼šå…±äº«ä¾èµ–åå•†ï¼Œé¿å…é‡å¤åŠ è½½                                        â”‚
â”‚  âœ… å®‰å…¨æ€§ï¼šæ”¯æŒ SRIï¼ˆå­èµ„æºå®Œæ•´æ€§æ ¡éªŒï¼‰                                        â”‚
â”‚  âœ… å®¹é”™æ€§ï¼šSRI å¤±è´¥è‡ªåŠ¨é‡è¯•                                                   â”‚
â”‚  âœ… è°ƒè¯•å‹å¥½ï¼šURL åŠ  ?mfdebug æŸ¥çœ‹è¯¦ç»†æ—¥å¿—                                     â”‚
â”‚  âœ… å¹¶å‘æ§åˆ¶ï¼šé˜²æ­¢é‡å¤è¯·æ±‚åŒä¸€èµ„æº                                             â”‚
â”‚  âœ… è¶…æ—¶ä¿æŠ¤ï¼š120 ç§’è¶…æ—¶ï¼Œé˜²æ­¢æ— é™ç­‰å¾…                                          â”‚
â”‚  âœ… TypeScriptï¼šå®Œæ•´çš„ç±»å‹å®šä¹‰                                                â”‚
â”‚  âœ… è·¨ç¯å¢ƒï¼šæ”¯æŒ Webpack 5 å’Œé Webpack 5 ç¯å¢ƒ                                â”‚
â”‚                                                                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                                                                             â”‚
â”‚  ä½¿ç”¨åœºæ™¯ï¼š                                                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
â”‚                                                                             â”‚
â”‚  1. æ‰€æœ‰ä½¿ç”¨ Module Federation çš„é¡¹ç›®éƒ½ä¾èµ–è¿™ä¸ªåŒ…                             â”‚
â”‚  2. apps-publicã€cloud ç­‰å¤šä¸ªé¡¹ç›®éƒ½å®‰è£…äº† @kso/mf                            â”‚
â”‚  3. æ˜¯æ•´ä¸ªå¾®å‰ç«¯æ¶æ„çš„"èƒ¶æ°´"ï¼Œè¿æ¥ Host å’Œ Remote                              â”‚
â”‚                                                                             â”‚
â”‚  é¡¹ç›®å…³ç³»ï¼š                                                                  â”‚
â”‚                                                                             â”‚
â”‚    @kso/mf (å·¥å…·åº“)                                                         â”‚
â”‚       â†“ è¢«ä¾èµ–                                                               â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚    â†“                 â†“                 â†“                                    â”‚
â”‚  apps-public       cloud           å…¶ä»–é¡¹ç›®                                  â”‚
â”‚  (Host)          (Host)            (Host)                                   â”‚
â”‚    â†“                 â†“                                                      â”‚
â”‚  åŠ è½½ Remote       åŠ è½½ Remote                                               â”‚
â”‚    â†“                 â†“                                                      â”‚
â”‚   mf               mf                                                       â”‚
â”‚  (Remote)         (Remote)                                                  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªåŒ…ï¼Ÿ**

```
âŒ æ²¡æœ‰ @kso/mf çš„ä¸–ç•Œï¼š
   æ¯ä¸ªé¡¹ç›®éƒ½è¦è‡ªå·±å®ç°ï¼š
   - script åŠ¨æ€åŠ è½½é€»è¾‘
   - å…±äº«ä¾èµ–åå•†é€»è¾‘
   - é”™è¯¯å¤„ç†
   - å¹¶å‘æ§åˆ¶
   - SRI æ ¡éªŒ
   - æ€§èƒ½ç›‘æ§
   â†’ ä»£ç é‡å¤ã€å®¹æ˜“å‡ºé”™ã€éš¾ä»¥ç»´æŠ¤

âœ… æœ‰ @kso/mf çš„ä¸–ç•Œï¼š
   import { loadRemoteModule } from '@kso/mf'
   await loadRemoteModule({ ... })
   â†’ ä¸€è¡Œä»£ç æå®šï¼Œç»Ÿä¸€ç»´æŠ¤ï¼ŒæŒç»­ä¼˜åŒ–
```

**ä¸ Webpack ModuleFederationPlugin çš„å…³ç³»ï¼š**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       é…åˆå…³ç³»                               â”‚
â”‚                                                             â”‚
â”‚  æ„å»ºæ—¶ (Webpack)              è¿è¡Œæ—¶ (@kso/mf)              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ Webpack       â”‚  ç”Ÿæˆ       â”‚  @kso/mf      â”‚            â”‚
â”‚  â”‚ ModuleFeder-  â”‚  â”€â”€â”€â”€â†’      â”‚  åŠ è½½ç”Ÿæˆçš„   â”‚            â”‚
â”‚  â”‚ ationPlugin   â”‚             â”‚  äº§ç‰©         â”‚            â”‚
â”‚  â”‚               â”‚             â”‚               â”‚            â”‚
â”‚  â”‚ é…ç½®ï¼š         â”‚             â”‚ åŠŸèƒ½ï¼š         â”‚            â”‚
â”‚  â”‚ - exposes     â”‚             â”‚ - åŠ¨æ€åŠ è½½     â”‚            â”‚
â”‚  â”‚ - shared      â”‚             â”‚ - ä¾èµ–åå•†     â”‚            â”‚
â”‚  â”‚ - remotes     â”‚             â”‚ - é”™è¯¯å¤„ç†     â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                             â”‚
â”‚  æ‰“åŒ…ç”Ÿæˆ              è¿è¡Œæ—¶ä½¿ç”¨                             â”‚
â”‚  kdocs-mf.js    â†’    loadRemoteModule()                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

#### â“ ä¸ºä»€ä¹ˆéœ€è¦ loadRemoteModule()ï¼Ÿ

**æ ¸å¿ƒé—®é¢˜**ï¼šWebpack Module Federation åªè´Ÿè´£**æ‰“åŒ…æ—¶é…ç½®**ï¼Œä¸æä¾›**è¿è¡Œæ—¶åŠ è½½çš„ä¾¿æ· API**ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               æ²¡æœ‰ loadRemoteModule() çš„ä¸–ç•Œ ğŸ˜°                              â”‚
â”‚                                                                             â”‚
â”‚  Webpack ModuleFederationPlugin åªæä¾›äº†æ„å»ºèƒ½åŠ›ï¼Œæ²¡æœ‰ç»Ÿä¸€çš„è¿è¡Œæ—¶åŠ è½½æ–¹å¼ï¼    â”‚
â”‚                                                                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                                                                             â”‚
â”‚  åœºæ™¯ 1: é™æ€é…ç½®è¿œç¨‹æ¨¡å—ï¼ˆæœ€å¸¸è§ï¼Œä½†ä¸çµæ´»ï¼‰                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
â”‚                                                                             â”‚
â”‚  // webpack.config.js (Host é¡¹ç›®)                                           â”‚
â”‚  new ModuleFederationPlugin({                                               â”‚
â”‚    name: 'host',                                                            â”‚
â”‚    remotes: {                                                               â”‚
â”‚      // å¿…é¡»åœ¨æ„å»ºæ—¶å†™æ­» URLï¼                                                â”‚
â”‚      kdocs: 'kdocs@https://cdn.example.com/mf/kdocs-mf.js',                 â”‚
â”‚    },                                                                       â”‚
â”‚  })                                                                         â”‚
â”‚                                                                             â”‚
â”‚  // ä½¿ç”¨æ—¶ï¼ˆä¸šåŠ¡ä»£ç ï¼‰                                                         â”‚
â”‚  import UikitFinder from 'kdocs/UikitFinderV2'  // é™æ€ import               â”‚
â”‚                                                                             â”‚
â”‚  ä¹ä¸€çœ‹ï¼šå¥½åƒæŒºç®€å•çš„ï¼Ÿ                                                        â”‚
â”‚  âœ“ é…ç½®æ¸…æ™°                                                                  â”‚
â”‚  âœ“ ä½¿ç”¨æ–¹ä¾¿ï¼ˆç›´æ¥ importï¼‰                                                    â”‚
â”‚                                                                             â”‚
â”‚  ä½†å®é™…é—®é¢˜å¾ˆå¤šï¼š                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
â”‚                                                                             â”‚
â”‚  âŒ é—®é¢˜ 1: URL å†™æ­»ï¼Œçµæ´»æ€§ä¸º 0                                               â”‚
â”‚     åœºæ™¯ï¼šä½ çš„åº”ç”¨è¦éƒ¨ç½²åˆ°ä¸åŒç¯å¢ƒ                                              â”‚
â”‚     - å¼€å‘ç¯å¢ƒï¼šhttp://localhost:8080/mf/kdocs-mf.js                         â”‚
â”‚     - æµ‹è¯•ç¯å¢ƒï¼šhttps://test.example.com/mf/kdocs-mf.js                      â”‚
â”‚     - ç”Ÿäº§ç¯å¢ƒï¼šhttps://cdn.example.com/mf/kdocs-mf.js                       â”‚
â”‚                                                                             â”‚
â”‚     å¦‚æœåœ¨ webpack.config.js å†™æ­»ï¼š                                           â”‚
â”‚     â†’ å¿…é¡»ä¸ºæ¯ä¸ªç¯å¢ƒæ„å»ºä¸åŒçš„åŒ…ï¼ˆbuild-dev, build-test, build-prodï¼‰           â”‚
â”‚     â†’ æˆ–è€…ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼Œä½†è¿˜æ˜¯è¦é‡æ–°æ„å»º                                         â”‚
â”‚     â†’ æ— æ³•åšåˆ°"ä¸€æ¬¡æ„å»ºï¼Œåˆ°å¤„éƒ¨ç½²"                                              â”‚
â”‚                                                                             â”‚
â”‚  âŒ é—®é¢˜ 2: æ— æ³•æ”¯æŒç°åº¦å‘å¸ƒ                                                   â”‚
â”‚     åœºæ™¯ï¼šæ–°ç‰ˆæœ¬ç»„ä»¶ä¸Šçº¿ï¼Œæƒ³å…ˆç»™ 10% ç”¨æˆ·è¯•ç”¨                                    â”‚
â”‚     - 90% ç”¨æˆ·ï¼šhttps://cdn.example.com/mf/kdocs-v1-mf.js                    â”‚
â”‚     - 10% ç”¨æˆ·ï¼šhttps://cdn.example.com/mf/kdocs-v2-mf.js                    â”‚
â”‚                                                                             â”‚
â”‚     å¦‚æœåœ¨ webpack.config.js å†™æ­»ï¼š                                           â”‚
â”‚     â†’ å®Œå…¨åšä¸åˆ°ï¼URL åœ¨æ„å»ºæ—¶å·²ç»å›ºå®š                                          â”‚
â”‚     â†’ ç°åº¦å‘å¸ƒéœ€è¦åœ¨è¿è¡Œæ—¶æ ¹æ®ç”¨æˆ· ID/éšæœºæ•°å†³å®š                                 â”‚
â”‚                                                                             â”‚
â”‚  âŒ é—®é¢˜ 3: æ— æ³•æ”¯æŒ A/B æµ‹è¯•                                                  â”‚
â”‚     åœºæ™¯ï¼šæƒ³æµ‹è¯•ä¸¤ä¸ªä¸åŒçš„ç»„ä»¶ç‰ˆæœ¬ï¼Œå“ªä¸ªè½¬åŒ–ç‡æ›´é«˜                                â”‚
â”‚     - A ç»„ç”¨æˆ·ï¼šæ—§ç‰ˆæ–‡ä»¶é€‰æ‹©å™¨                                                 â”‚
â”‚     - B ç»„ç”¨æˆ·ï¼šæ–°ç‰ˆæ–‡ä»¶é€‰æ‹©å™¨                                                 â”‚
â”‚                                                                             â”‚
â”‚     å¦‚æœåœ¨ webpack.config.js å†™æ­»ï¼š                                           â”‚
â”‚     â†’ æ— æ³•å®ç°ï¼                                                              â”‚
â”‚                                                                             â”‚
â”‚  âŒ é—®é¢˜ 4: æ— æ³•é™çº§å¤„ç†                                                       â”‚
â”‚     åœºæ™¯ï¼šCDN æŒ‚äº†ï¼Œè¿œç¨‹æ¨¡å—åŠ è½½å¤±è´¥                                            â”‚
â”‚                                                                             â”‚
â”‚     ä½¿ç”¨é™æ€é…ç½®ï¼š                                                             â”‚
â”‚     import UikitFinder from 'kdocs/UikitFinderV2'  // å¤±è´¥ â†’ ç™½å±ï¼          â”‚
â”‚                                                                             â”‚
â”‚     æ— æ³•æ•è·é”™è¯¯ï¼Œæ— æ³•é™çº§åˆ°æœ¬åœ°ç‰ˆæœ¬ï¼                                           â”‚
â”‚                                                                             â”‚
â”‚  âŒ é—®é¢˜ 5: æ— æ³•æŒ‰éœ€åŠ è½½                                                       â”‚
â”‚     åœºæ™¯ï¼šåªæœ‰ VIP ç”¨æˆ·æ‰èƒ½ç”¨é«˜çº§æ–‡ä»¶é€‰æ‹©å™¨                                      â”‚
â”‚                                                                             â”‚
â”‚     ä½¿ç”¨é™æ€é…ç½®ï¼š                                                             â”‚
â”‚     â†’ æ‰€æœ‰ç”¨æˆ·éƒ½ä¼šåŠ è½½è¿™ä¸ªè¿œç¨‹æ¨¡å—ï¼ˆå³ä½¿ä¸ç”¨ï¼‰                                    â”‚
â”‚     â†’ æµªè´¹å¸¦å®½å’Œæ€§èƒ½                                                          â”‚
â”‚                                                                             â”‚
â”‚  âŒ é—®é¢˜ 6: ç¼“å­˜æ›´æ–°å›°éš¾                                                       â”‚
â”‚     åœºæ™¯ï¼šè¿œç¨‹æ¨¡å—æ›´æ–°äº†ï¼Œä½†ç”¨æˆ·æµè§ˆå™¨ç¼“å­˜äº†æ—§çš„å…¥å£æ–‡ä»¶                           â”‚
â”‚                                                                             â”‚
â”‚     ä½¿ç”¨é™æ€é…ç½®ï¼š                                                             â”‚
â”‚     webpack.config.js:                                                      â”‚
â”‚       kdocs: 'kdocs@https://cdn.example.com/mf/kdocs-mf.js'                 â”‚
â”‚     â†’ ç”¨æˆ·æµè§ˆå™¨ç¼“å­˜äº†è¿™ä¸ª URL                                                 â”‚
â”‚     â†’ è¿œç¨‹æ¨¡å—æ›´æ–°åï¼Œç”¨æˆ·è¿˜åœ¨ç”¨æ—§ç‰ˆæœ¬                                          â”‚
â”‚     â†’ å¿…é¡»ç­‰æµè§ˆå™¨ç¼“å­˜è¿‡æœŸæˆ–è€…ç”¨æˆ·å¼ºåˆ·                                          â”‚
â”‚                                                                             â”‚
â”‚     ä½¿ç”¨ loadRemoteModuleï¼š                                                  â”‚
â”‚     url: `https://cdn.example.com/mf/kdocs-mf.js?t=${Date.now()}`           â”‚
â”‚     â†’ å¯ä»¥åŠ æ—¶é—´æˆ³å¼ºåˆ¶åˆ·æ–°                                                     â”‚
â”‚                                                                             â”‚
â”‚  âŒ é—®é¢˜ 7: å¤šç¯å¢ƒé…ç½®å¤æ‚                                                     â”‚
â”‚     åœºæ™¯ï¼šå…¬å¸æœ‰å¤šä¸ªä¸šåŠ¡çº¿ï¼Œæ¯ä¸ªéƒ½ç”¨ä¸åŒçš„ CDN                                   â”‚
â”‚                                                                             â”‚
â”‚     webpack.config.js éœ€è¦è¿™æ ·å†™ï¼š                                            â”‚
â”‚     remotes: {                                                              â”‚
â”‚       kdocs: process.env.ENV === 'prod'                                     â”‚
â”‚         ? 'kdocs@https://cdn-prod.com/mf/kdocs-mf.js'                       â”‚
â”‚         : process.env.ENV === 'test'                                        â”‚
â”‚         ? 'kdocs@https://cdn-test.com/mf/kdocs-mf.js'                       â”‚
â”‚         : 'kdocs@http://localhost:8080/mf/kdocs-mf.js'                      â”‚
â”‚     }                                                                       â”‚
â”‚     â†’ é…ç½®æ–‡ä»¶å˜å¾—å¤æ‚éš¾ç»´æŠ¤                                                   â”‚
â”‚     â†’ æ¯æ¬¡æ”¹é…ç½®éƒ½è¦é‡æ–°æ„å»º                                                   â”‚
â”‚                                                                             â”‚
â”‚  âŒ é—®é¢˜ 8: æ— æ³•åŠ¨æ€åˆ‡æ¢ CDN                                                   â”‚
â”‚     åœºæ™¯ï¼šä¸» CDN å“åº”æ…¢ï¼Œæƒ³åˆ‡æ¢åˆ°å¤‡ç”¨ CDN                                       â”‚
â”‚                                                                             â”‚
â”‚     ä½¿ç”¨é™æ€é…ç½®ï¼š                                                             â”‚
â”‚     â†’ å®Œå…¨åšä¸åˆ°ï¼CDN åœ°å€å·²ç»ç¼–è¯‘è¿›ä»£ç                                         â”‚
â”‚                                                                             â”‚
â”‚     ä½¿ç”¨ loadRemoteModuleï¼š                                                  â”‚
â”‚     const url = await getCDN()  // è¿è¡Œæ—¶æ£€æµ‹å“ªä¸ª CDN æœ€å¿«                    â”‚
â”‚     await loadRemoteModule({ url })                                         â”‚
â”‚                                                                             â”‚
â”‚  âŒ é—®é¢˜ 9: æ— æ³•æ ¹æ®ç”¨æˆ·æƒé™åŠ è½½ä¸åŒç‰ˆæœ¬                                         â”‚
â”‚     åœºæ™¯ï¼šä¼ä¸šç‰ˆç”¨æˆ·ç”¨é«˜çº§åŠŸèƒ½ï¼Œä¸ªäººç‰ˆç”¨æˆ·ç”¨åŸºç¡€åŠŸèƒ½                              â”‚
â”‚                                                                             â”‚
â”‚     ä½¿ç”¨é™æ€é…ç½®ï¼š                                                             â”‚
â”‚     â†’ åªèƒ½åŠ è½½ä¸€ä¸ªç‰ˆæœ¬ï¼Œæ— æ³•åŒºåˆ†                                                â”‚
â”‚                                                                             â”‚
â”‚     ä½¿ç”¨ loadRemoteModuleï¼š                                                  â”‚
â”‚     const url = user.isPro                                                  â”‚
â”‚       ? 'https://cdn.com/mf/kdocs-pro-mf.js'                                â”‚
â”‚       : 'https://cdn.com/mf/kdocs-basic-mf.js'                              â”‚
â”‚                                                                             â”‚
â”‚  âŒ é—®é¢˜ 10: å¤šé¡¹ç›®é‡å¤é…ç½®                                                    â”‚
â”‚     åœºæ™¯ï¼š10 ä¸ªé¡¹ç›®éƒ½è¦æ¥å…¥åŒä¸€ä¸ªè¿œç¨‹æ¨¡å—                                        â”‚
â”‚                                                                             â”‚
â”‚     ä½¿ç”¨é™æ€é…ç½®ï¼š                                                             â”‚
â”‚     â†’ æ¯ä¸ªé¡¹ç›®çš„ webpack.config.js éƒ½è¦å†™ä¸€é                                  â”‚
â”‚     â†’ URL å˜äº†ï¼Œ10 ä¸ªé¡¹ç›®éƒ½è¦æ”¹                                                â”‚
â”‚                                                                             â”‚
â”‚     ä½¿ç”¨ loadRemoteModule + é…ç½®ä¸­å¿ƒï¼š                                        â”‚
â”‚     â†’ ä¸šåŠ¡ä»£ç ä»é…ç½®ä¸­å¿ƒè·å– URL                                               â”‚
â”‚     â†’ URL å˜äº†ï¼Œåªéœ€è¦æ”¹é…ç½®ä¸­å¿ƒ                                               â”‚
â”‚     â†’ æ‰€æœ‰é¡¹ç›®è‡ªåŠ¨ç”Ÿæ•ˆï¼Œæ— éœ€é‡æ–°éƒ¨ç½²                                            â”‚
â”‚                                                                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                                                                             â”‚
â”‚  çœŸå®åœºæ™¯å¯¹æ¯”ï¼šè¿œç¨‹æ¨¡å—éœ€è¦ç´§æ€¥æ›´æ–°                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
â”‚                                                                             â”‚
â”‚  â° åœºæ™¯ï¼šå‘ç°æ–‡ä»¶é€‰æ‹©å™¨æœ‰ä¸¥é‡ bugï¼Œéœ€è¦ç´§æ€¥å‘å¸ƒä¿®å¤ç‰ˆæœ¬                          â”‚
â”‚                                                                             â”‚
â”‚  ä½¿ç”¨é™æ€é…ç½®ï¼ˆwebpack.config.jsï¼‰çš„æµç¨‹ï¼š                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ 1. Remote é¡¹ç›®ä¿®å¤ bugï¼Œå‘å¸ƒæ–°ç‰ˆæœ¬                            â”‚            â”‚
â”‚  â”‚    â†’ kdocs-mf.js å·²æ›´æ–°ï¼ˆ10 åˆ†é’Ÿï¼‰                            â”‚            â”‚
â”‚  â”‚                                                             â”‚            â”‚
â”‚  â”‚ 2. Host é¡¹ç›®éœ€è¦é‡æ–°æ„å»ºï¼ˆå› ä¸º URL å¯èƒ½è¦æ”¹ï¼Ÿï¼‰                â”‚            â”‚
â”‚  â”‚    â†’ npm run build (æ¯ä¸ªé¡¹ç›® 5 åˆ†é’Ÿ Ã— 10 ä¸ªé¡¹ç›® = 50 åˆ†é’Ÿ)    â”‚            â”‚
â”‚  â”‚                                                             â”‚            â”‚
â”‚  â”‚ 3. é‡æ–°éƒ¨ç½² Host é¡¹ç›®                                        â”‚            â”‚
â”‚  â”‚    â†’ éƒ¨ç½²åˆ°å„ä¸ªç¯å¢ƒï¼ˆ20 åˆ†é’Ÿï¼‰                                â”‚            â”‚
â”‚  â”‚                                                             â”‚            â”‚
â”‚  â”‚ 4. ç­‰å¾…ç”¨æˆ·åˆ·æ–°é¡µé¢                                          â”‚            â”‚
â”‚  â”‚    â†’ ç”¨æˆ·å¯èƒ½å‡ å°æ—¶åæ‰åˆ·æ–°                                   â”‚            â”‚
â”‚  â”‚                                                             â”‚            â”‚
â”‚  â”‚ æ€»è€—æ—¶ï¼š80 åˆ†é’Ÿ + ç­‰å¾…ç”¨æˆ·åˆ·æ–°                                â”‚            â”‚
â”‚  â”‚ ğŸ”¥ Bug ç»§ç»­å½±å“ç”¨æˆ· 1-2 å°æ—¶ï¼                                â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                             â”‚
â”‚  ä½¿ç”¨ loadRemoteModule() çš„æµç¨‹ï¼š                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ 1. Remote é¡¹ç›®ä¿®å¤ bugï¼Œå‘å¸ƒæ–°ç‰ˆæœ¬                            â”‚            â”‚
â”‚  â”‚    â†’ kdocs-mf.js?t=1234567890 å·²æ›´æ–°ï¼ˆ10 åˆ†é’Ÿï¼‰              â”‚            â”‚
â”‚  â”‚                                                             â”‚            â”‚
â”‚  â”‚ 2. Host é¡¹ç›®æ— éœ€æ”¹åŠ¨ï¼                                       â”‚            â”‚
â”‚  â”‚    â†’ å› ä¸º URL æ˜¯è¿è¡Œæ—¶åŠ¨æ€è·å–çš„                              â”‚            â”‚
â”‚  â”‚    â†’ ä»£ç ä¸­ï¼šurl: `${cdn}/mf/kdocs-mf.js?t=${Date.now()}`   â”‚            â”‚
â”‚  â”‚                                                             â”‚            â”‚
â”‚  â”‚ 3. ç”¨æˆ·åˆ·æ–°é¡µé¢ï¼Œè‡ªåŠ¨åŠ è½½æ–°ç‰ˆæœ¬                               â”‚            â”‚
â”‚  â”‚    â†’ å› ä¸ºæœ‰æ—¶é—´æˆ³ï¼Œä¸ä¼šç¼“å­˜                                   â”‚            â”‚
â”‚  â”‚                                                             â”‚            â”‚
â”‚  â”‚ æ€»è€—æ—¶ï¼š10 åˆ†é’Ÿ                                              â”‚            â”‚
â”‚  â”‚ âœ… Bug ä¿®å¤ç«‹å³ç”Ÿæ•ˆï¼                                         â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                             â”‚
â”‚  å·®è·ï¼šä» 80+ åˆ†é’Ÿå‡å°‘åˆ° 10 åˆ†é’Ÿï¼                                            â”‚
â”‚                                                                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                                                                             â”‚
â”‚  å¦ä¸€ä¸ªçœŸå®åœºæ™¯ï¼šå¤šç¯å¢ƒéƒ¨ç½²                                                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
â”‚                                                                             â”‚
â”‚  å…¬å¸æœ‰ 4 ä¸ªç¯å¢ƒï¼šå¼€å‘ã€æµ‹è¯•ã€é¢„å‘å¸ƒã€ç”Ÿäº§                                      â”‚
â”‚                                                                             â”‚
â”‚  ä½¿ç”¨é™æ€é…ç½®ï¼š                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ // webpack.config.js                                        â”‚            â”‚
â”‚  â”‚ const getRemoteUrl = () => {                                â”‚            â”‚
â”‚  â”‚   if (process.env.ENV === 'dev') {                          â”‚            â”‚
â”‚  â”‚     return 'http://localhost:8080/mf/kdocs-mf.js'           â”‚            â”‚
â”‚  â”‚   } else if (process.env.ENV === 'test') {                  â”‚            â”‚
â”‚  â”‚     return 'https://test.example.com/mf/kdocs-mf.js'        â”‚            â”‚
â”‚  â”‚   } else if (process.env.ENV === 'pre') {                   â”‚            â”‚
â”‚  â”‚     return 'https://pre.example.com/mf/kdocs-mf.js'         â”‚            â”‚
â”‚  â”‚   } else {                                                  â”‚            â”‚
â”‚  â”‚     return 'https://cdn.example.com/mf/kdocs-mf.js'         â”‚            â”‚
â”‚  â”‚   }                                                         â”‚            â”‚
â”‚  â”‚ }                                                           â”‚            â”‚
â”‚  â”‚                                                             â”‚            â”‚
â”‚  â”‚ new ModuleFederationPlugin({                                â”‚            â”‚
â”‚  â”‚   remotes: {                                                â”‚            â”‚
â”‚  â”‚     kdocs: `kdocs@${getRemoteUrl()}`                        â”‚            â”‚
â”‚  â”‚   }                                                         â”‚            â”‚
â”‚  â”‚ })                                                          â”‚            â”‚
â”‚  â”‚                                                             â”‚            â”‚
â”‚  â”‚ éƒ¨ç½²æµç¨‹ï¼š                                                   â”‚            â”‚
â”‚  â”‚ npm run build:dev     â†’ æ„å»ºå¼€å‘ç‰ˆ                          â”‚            â”‚
â”‚  â”‚ npm run build:test    â†’ æ„å»ºæµ‹è¯•ç‰ˆ                          â”‚            â”‚
â”‚  â”‚ npm run build:pre     â†’ æ„å»ºé¢„å‘å¸ƒç‰ˆ                        â”‚            â”‚
â”‚  â”‚ npm run build:prod    â†’ æ„å»ºç”Ÿäº§ç‰ˆ                          â”‚            â”‚
â”‚  â”‚                                                             â”‚            â”‚
â”‚  â”‚ é—®é¢˜ï¼š                                                       â”‚            â”‚
â”‚  â”‚ âŒ éœ€è¦æ„å»º 4 æ¬¡ï¼ˆæ¯æ¬¡ 5 åˆ†é’Ÿ = 20 åˆ†é’Ÿï¼‰                     â”‚            â”‚
â”‚  â”‚ âŒ äº§ç‰©åŒ…ä¸ä¸€æ ·ï¼Œæ— æ³•éªŒè¯"åœ¨æµ‹è¯•ç¯å¢ƒé€šè¿‡çš„å°±æ˜¯ç”Ÿäº§åŒ…"          â”‚            â”‚
â”‚  â”‚ âŒ URL å˜äº†ï¼Œè¦æ”¹ 4 ä¸ªç¯å¢ƒçš„æ„å»ºè„šæœ¬                          â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                             â”‚
â”‚  ä½¿ç”¨ loadRemoteModule()ï¼š                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ // ä¸šåŠ¡ä»£ç ï¼ˆè¿è¡Œæ—¶å†³å®šï¼‰                                     â”‚            â”‚
â”‚  â”‚ import { loadRemoteModule } from '@kso/mf'                  â”‚            â”‚
â”‚  â”‚                                                             â”‚            â”‚
â”‚  â”‚ function getRemoteUrl() {                                   â”‚            â”‚
â”‚  â”‚   // ä»é…ç½®ä¸­å¿ƒæˆ–è€…å½“å‰åŸŸååˆ¤æ–­                               â”‚            â”‚
â”‚  â”‚   const host = window.location.host                         â”‚            â”‚
â”‚  â”‚   if (host.includes('localhost')) {                         â”‚            â”‚
â”‚  â”‚     return 'http://localhost:8080/mf/kdocs-mf.js'           â”‚            â”‚
â”‚  â”‚   } else if (host.includes('test')) {                       â”‚            â”‚
â”‚  â”‚     return 'https://test.example.com/mf/kdocs-mf.js'        â”‚            â”‚
â”‚  â”‚   } else if (host.includes('pre')) {                        â”‚            â”‚
â”‚  â”‚     return 'https://pre.example.com/mf/kdocs-mf.js'         â”‚            â”‚
â”‚  â”‚   } else {                                                  â”‚            â”‚
â”‚  â”‚     return 'https://cdn.example.com/mf/kdocs-mf.js'         â”‚            â”‚
â”‚  â”‚   }                                                         â”‚            â”‚
â”‚  â”‚ }                                                           â”‚            â”‚
â”‚  â”‚                                                             â”‚            â”‚
â”‚  â”‚ const module = await loadRemoteModule({                     â”‚            â”‚
â”‚  â”‚   containerName: 'kdocs',                                   â”‚            â”‚
â”‚  â”‚   exposeModuleName: 'UikitFinderV2',                        â”‚            â”‚
â”‚  â”‚   url: getRemoteUrl()  // è¿è¡Œæ—¶å†³å®šï¼                       â”‚            â”‚
â”‚  â”‚ })                                                          â”‚            â”‚
â”‚  â”‚                                                             â”‚            â”‚
â”‚  â”‚ éƒ¨ç½²æµç¨‹ï¼š                                                   â”‚            â”‚
â”‚  â”‚ npm run build    â†’ åªæ„å»ºä¸€æ¬¡ï¼                              â”‚            â”‚
â”‚  â”‚ éƒ¨ç½²åˆ° 4 ä¸ªç¯å¢ƒ   â†’ ä½¿ç”¨åŒä¸€ä¸ªåŒ…ï¼                           â”‚            â”‚
â”‚  â”‚                                                             â”‚            â”‚
â”‚  â”‚ ä¼˜åŠ¿ï¼š                                                       â”‚            â”‚
â”‚  â”‚ âœ… åªéœ€æ„å»º 1 æ¬¡ï¼ˆ5 åˆ†é’Ÿï¼ŒèŠ‚çœ 75%ï¼‰                          â”‚            â”‚
â”‚  â”‚ âœ… 4 ä¸ªç¯å¢ƒç”¨åŒä¸€ä¸ªåŒ…ï¼Œä¿è¯ä¸€è‡´æ€§                             â”‚            â”‚
â”‚  â”‚ âœ… URL å˜äº†ï¼Œåªéœ€æ”¹è¿è¡Œæ—¶é€»è¾‘ï¼Œæ— éœ€é‡æ–°æ„å»º                    â”‚            â”‚
â”‚  â”‚ âœ… çœŸæ­£åšåˆ°"ä¸€æ¬¡æ„å»ºï¼Œåˆ°å¤„éƒ¨ç½²"                               â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                                                                             â”‚
â”‚  æ ¸å¿ƒå·®å¼‚å¯¹æ¯”è¡¨ï¼š                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚   å¯¹æ¯”ç»´åº¦        â”‚ webpack.config  â”‚ loadRemoteModule()   â”‚            â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚
â”‚  â”‚ URL å†³å®šæ—¶æœº      â”‚ æ„å»ºæ—¶ï¼ˆå›ºå®šï¼‰   â”‚ è¿è¡Œæ—¶ï¼ˆåŠ¨æ€ï¼‰        â”‚            â”‚
â”‚  â”‚ ç¯å¢ƒåˆ‡æ¢          â”‚ éœ€è¦é‡æ–°æ„å»º     â”‚ æ— éœ€æ„å»º              â”‚            â”‚
â”‚  â”‚ ç°åº¦å‘å¸ƒ          â”‚ âŒ ä¸æ”¯æŒ       â”‚ âœ… æ”¯æŒ               â”‚            â”‚
â”‚  â”‚ A/B æµ‹è¯•          â”‚ âŒ ä¸æ”¯æŒ       â”‚ âœ… æ”¯æŒ               â”‚            â”‚
â”‚  â”‚ é™çº§å¤„ç†          â”‚ âŒ å›°éš¾         â”‚ âœ… ç®€å•ï¼ˆtry-catchï¼‰  â”‚            â”‚
â”‚  â”‚ æŒ‰éœ€åŠ è½½          â”‚ âŒ å…¨é‡åŠ è½½     â”‚ âœ… æ¡ä»¶åŠ è½½           â”‚            â”‚
â”‚  â”‚ ç¼“å­˜æ§åˆ¶          â”‚ âŒ ä¾èµ–æµè§ˆå™¨   â”‚ âœ… åŠ æ—¶é—´æˆ³           â”‚            â”‚
â”‚  â”‚ CDN åˆ‡æ¢          â”‚ âŒ éœ€è¦é‡æ„å»º   â”‚ âœ… è¿è¡Œæ—¶åˆ‡æ¢         â”‚            â”‚
â”‚  â”‚ å¤šé¡¹ç›®é…ç½®        â”‚ âŒ é‡å¤é…ç½®     â”‚ âœ… ç»Ÿä¸€å·¥å…·           â”‚            â”‚
â”‚  â”‚ ç´§æ€¥ä¿®å¤é€Ÿåº¦      â”‚ æ…¢ï¼ˆ80+åˆ†é’Ÿï¼‰   â”‚ å¿«ï¼ˆ10 åˆ†é’Ÿï¼‰         â”‚            â”‚
â”‚  â”‚ æ„å»ºäº§ç‰©ä¸€è‡´æ€§    â”‚ âŒ å¤šæ¬¡æ„å»º     â”‚ âœ… ä¸€æ¬¡æ„å»º           â”‚            â”‚
â”‚  â”‚ é”™è¯¯å¤„ç†          â”‚ âŒ ç™½å±         â”‚ âœ… å¯é™çº§             â”‚            â”‚
â”‚  â”‚ æƒé™æ§åˆ¶          â”‚ âŒ æ— æ³•åŒºåˆ†     â”‚ âœ… å¯åŠ è½½ä¸åŒç‰ˆæœ¬      â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                                                                             â”‚
â”‚  ä¸ºä»€ä¹ˆè¯´"çœ‹èµ·æ¥ç®€å•"å…¶å®æ˜¯é™·é˜±ï¼Ÿ                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
â”‚                                                                             â”‚
â”‚  åœ¨ webpack.config.js é…ç½®ï¼š                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ // çœ‹èµ·æ¥åªéœ€è¦ 3 è¡Œä»£ç                                       â”‚            â”‚
â”‚  â”‚ remotes: {                                                  â”‚            â”‚
â”‚  â”‚   kdocs: 'kdocs@https://cdn.example.com/mf/kdocs-mf.js'     â”‚            â”‚
â”‚  â”‚ }                                                           â”‚            â”‚
â”‚  â”‚                                                             â”‚            â”‚
â”‚  â”‚ è¡¨é¢ï¼šâœ¨ ç®€å•                                                â”‚            â”‚
â”‚  â”‚ å®é™…ï¼šğŸ’£ æŠŠå¤æ‚åº¦æ¨è¿Ÿåˆ°åé¢                                   â”‚            â”‚
â”‚  â”‚                                                             â”‚            â”‚
â”‚  â”‚ åç»­ä¼šé‡åˆ°ï¼š                                                 â”‚            â”‚
â”‚  â”‚ - ç¯å¢ƒåˆ‡æ¢ï¼šè¦æ”¹é…ç½®ã€é‡æ„å»º                                  â”‚            â”‚
â”‚  â”‚ - URL å˜æ›´ï¼šè¦æ”¹é…ç½®ã€é‡æ„å»ºã€é‡éƒ¨ç½²                          â”‚            â”‚
â”‚  â”‚ - ç´§æ€¥ä¿®å¤ï¼šè¦ç­‰æ‰€æœ‰ Host é‡æ–°éƒ¨ç½²                            â”‚            â”‚
â”‚  â”‚ - ç°åº¦å‘å¸ƒï¼šå®Œå…¨åšä¸åˆ°                                        â”‚            â”‚
â”‚  â”‚ - é™çº§å¤„ç†ï¼šå¾ˆéš¾å®ç°                                          â”‚            â”‚
â”‚  â”‚                                                             â”‚            â”‚
â”‚  â”‚ æœ¬è´¨ï¼šç‰ºç‰²äº†çµæ´»æ€§ï¼Œæ¢æ¥äº†è¡¨é¢çš„ç®€å•                           â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                             â”‚
â”‚  ä½¿ç”¨ loadRemoteModule()ï¼š                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ // ä»£ç ç¨å¾®å¤šä¸€ç‚¹ï¼ˆ10 è¡Œï¼‰                                    â”‚            â”‚
â”‚  â”‚ const module = await loadRemoteModule({                     â”‚            â”‚
â”‚  â”‚   containerName: 'kdocs',                                   â”‚            â”‚
â”‚  â”‚   exposeModuleName: 'UikitFinderV2',                        â”‚            â”‚
â”‚  â”‚   url: getRemoteUrl(),  // å‡½æ•°å†³å®š                          â”‚            â”‚
â”‚  â”‚   manifest: getManifest()                                   â”‚            â”‚
â”‚  â”‚ })                                                          â”‚            â”‚
â”‚  â”‚                                                             â”‚            â”‚
â”‚  â”‚ è¡¨é¢ï¼šğŸ¤” ç¨å¾®å¤æ‚                                             â”‚            â”‚
â”‚  â”‚ å®é™…ï¼šğŸ‰ ä¸€åŠ³æ°¸é€¸ï¼Œåç»­æ— å¿§                                   â”‚            â”‚
â”‚  â”‚                                                             â”‚            â”‚
â”‚  â”‚ åç»­ä¼˜åŠ¿ï¼š                                                   â”‚            â”‚
â”‚  â”‚ - ç¯å¢ƒåˆ‡æ¢ï¼šæ”¹ä¸€è¡Œä»£ç é€»è¾‘ï¼Œæ— éœ€æ„å»º                          â”‚            â”‚
â”‚  â”‚ - URL å˜æ›´ï¼šæ”¹é…ç½®ä¸­å¿ƒï¼Œæ— éœ€éƒ¨ç½²                             â”‚            â”‚
â”‚  â”‚ - ç´§æ€¥ä¿®å¤ï¼šåªæ›´æ–° Remoteï¼ŒHost ä¸ç”¨åŠ¨                       â”‚            â”‚
â”‚  â”‚ - ç°åº¦å‘å¸ƒï¼šéšæ—¶æ”¯æŒ                                         â”‚            â”‚
â”‚  â”‚ - é™çº§å¤„ç†ï¼šåŠ ä¸ª try-catch å°±è¡Œ                              â”‚            â”‚
â”‚  â”‚                                                             â”‚            â”‚
â”‚  â”‚ æœ¬è´¨ï¼šåˆæœŸç¨å¾®å¤æ‚ï¼Œæ¢æ¥é•¿æœŸçš„çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§                 â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                             â”‚
â”‚  ğŸ“ ç±»æ¯”ï¼š                                                                    â”‚
â”‚  webpack.config.js = ä¹°æˆ¿ï¼ˆä¾¿å®œä½†ä¸èƒ½æ¬å®¶ï¼Œè£…ä¿®æ”¹åŠ¨è¦é‡å»ºï¼‰                    â”‚
â”‚  loadRemoteModule() = ç§Ÿæˆ¿ï¼ˆçµæ´»æƒ³æ¬å°±æ¬ï¼Œå®¶å…·éšæ—¶æ¢ï¼‰                        â”‚
â”‚                                                                             â”‚
â”‚  å¾®å‰ç«¯çš„æ ¸å¿ƒå°±æ˜¯"çµæ´»æ€§"ï¼Œæ‰€ä»¥è¿è¡Œæ—¶åŠ¨æ€åŠ è½½æ˜¯å¿…ç„¶é€‰æ‹©ï¼                       â”‚
â”‚                                                                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                                                                             â”‚
â”‚  âš–ï¸ ç­‰ç­‰ï¼webpack.config.js é…ç½®ä¹Ÿæœ‰å¾ˆå¤šäººåœ¨ç”¨ï¼Œä¸ºä»€ä¹ˆï¼Ÿ                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
â”‚                                                                             â”‚
â”‚  é‡è¦æ¾„æ¸…ï¼šwebpack.config.js é™æ€é…ç½®å¹¶é"é”™è¯¯"ï¼Œè€Œæ˜¯é€‚åˆä¸åŒåœºæ™¯ï¼              â”‚
â”‚                                                                             â”‚
â”‚  ä¸¤ç§æ–¹å¼çš„é€‰æ‹©çŸ©é˜µï¼š                                                          â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚              ä»€ä¹ˆæ—¶å€™ç”¨ webpack.config.jsï¼Ÿ                      â”‚       â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚ âœ… é€‚åˆåœºæ™¯ï¼š                                                    â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚ 1. ç®€å•é¡¹ç›®ï¼Œä¸éœ€è¦å¤æ‚çš„ç¯å¢ƒåˆ‡æ¢                                â”‚       â”‚
â”‚  â”‚    - åªæœ‰å¼€å‘å’Œç”Ÿäº§ä¸¤ä¸ªç¯å¢ƒ                                      â”‚       â”‚
â”‚  â”‚    - ä¸éœ€è¦ç°åº¦å‘å¸ƒ                                              â”‚       â”‚
â”‚  â”‚    - ä¸éœ€è¦ A/B æµ‹è¯•                                             â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚ 2. Remote æ¨¡å—å¾ˆç¨³å®šï¼Œå¾ˆå°‘æ›´æ–°                                   â”‚       â”‚
â”‚  â”‚    - æ¯”å¦‚å…¬å¸çš„è®¾è®¡ç³»ç»Ÿï¼ˆUI ç»„ä»¶åº“ï¼‰                              â”‚       â”‚
â”‚  â”‚    - æ›´æ–°é¢‘ç‡ä½ï¼Œå‡ ä¸ªæœˆæ‰æ›´æ–°ä¸€æ¬¡                                 â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚ 3. Host å’Œ Remote ç”±åŒä¸€ä¸ªå›¢é˜Ÿç»´æŠ¤                               â”‚       â”‚
â”‚  â”‚    - å¯ä»¥åè°ƒå‘å¸ƒæ—¶é—´                                            â”‚       â”‚
â”‚  â”‚    - ä¸éœ€è¦ç‹¬ç«‹éƒ¨ç½²                                              â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚ 4. è¿½æ±‚å¼€å‘ä½“éªŒï¼ˆDXï¼‰                                            â”‚       â”‚
â”‚  â”‚    - ç›´æ¥ importï¼ŒIDE è‡ªåŠ¨è¡¥å…¨                                   â”‚       â”‚
â”‚  â”‚    - TypeScript ç±»å‹æç¤º                                         â”‚       â”‚
â”‚  â”‚    - Webpack è‡ªåŠ¨å¤„ç†ä¾èµ–                                        â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚ 5. æœ¬åœ°å¼€å‘è°ƒè¯•                                                  â”‚       â”‚
â”‚  â”‚    - å¼€å‘ç¯å¢ƒå¯ä»¥æŒ‡å‘ localhost                                  â”‚       â”‚
â”‚  â”‚    - çƒ­æ›´æ–°ï¼ˆHMRï¼‰æ”¯æŒæ›´å¥½                                        â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚ ç¤ºä¾‹åœºæ™¯ï¼š                                                       â”‚       â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚       â”‚
â”‚  â”‚ â”‚ åœºæ™¯ï¼šå…¬å¸å†…éƒ¨ç®¡ç†ç³»ç»Ÿ                                     â”‚   â”‚       â”‚
â”‚  â”‚ â”‚ - åªéƒ¨ç½²åœ¨å…¬å¸å†…ç½‘                                         â”‚   â”‚       â”‚
â”‚  â”‚ â”‚ - åªæœ‰å¼€å‘/ç”Ÿäº§ä¸¤ä¸ªç¯å¢ƒ                                    â”‚   â”‚       â”‚
â”‚  â”‚ â”‚ - ç”¨æˆ·éƒ½æ˜¯å…¬å¸å‘˜å·¥ï¼Œä¸éœ€è¦ç°åº¦                              â”‚   â”‚       â”‚
â”‚  â”‚ â”‚ - å¯ä»¥ç»Ÿä¸€å‡çº§ï¼Œä¸éœ€è¦ç‰ˆæœ¬ç®¡ç†                              â”‚   â”‚       â”‚
â”‚  â”‚ â”‚                                                           â”‚   â”‚       â”‚
â”‚  â”‚ â”‚ â†’ ä½¿ç”¨ webpack.config.js å°±å¤Ÿäº†ï¼                          â”‚   â”‚       â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚              ä»€ä¹ˆæ—¶å€™ç”¨ loadRemoteModule()ï¼Ÿ                     â”‚       â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚ âœ… é€‚åˆåœºæ™¯ï¼š                                                    â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚ 1. å¤æ‚çš„å¤šç¯å¢ƒéƒ¨ç½²                                             â”‚       â”‚
â”‚  â”‚    - å¼€å‘/æµ‹è¯•/é¢„å‘å¸ƒ/ç”Ÿäº§/ç°åº¦å¤šä¸ªç¯å¢ƒ                          â”‚       â”‚
â”‚  â”‚    - ä¸åŒç¯å¢ƒ CDN ä¸åŒ                                           â”‚       â”‚
â”‚  â”‚    - éœ€è¦"ä¸€æ¬¡æ„å»ºï¼Œåˆ°å¤„éƒ¨ç½²"                                    â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚ 2. éœ€è¦ç°åº¦å‘å¸ƒ/A/B æµ‹è¯•                                         â”‚       â”‚
â”‚  â”‚    - æ ¹æ®ç”¨æˆ· ID åŠ è½½ä¸åŒç‰ˆæœ¬                                    â”‚       â”‚
â”‚  â”‚    - æ ¹æ®åœ°åŒºåŠ è½½ä¸åŒç‰ˆæœ¬                                        â”‚       â”‚
â”‚  â”‚    - æ ¹æ® VIP ç­‰çº§åŠ è½½ä¸åŒç‰ˆæœ¬                                   â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚ 3. Host å’Œ Remote ç‹¬ç«‹éƒ¨ç½²                                       â”‚       â”‚
â”‚  â”‚    - ä¸åŒå›¢é˜Ÿç»´æŠ¤                                                â”‚       â”‚
â”‚  â”‚    - Remote æ›´æ–°ä¸èƒ½å½±å“ Host                                    â”‚       â”‚
â”‚  â”‚    - éœ€è¦ç‹¬ç«‹å‘å¸ƒå‘¨æœŸ                                            â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚ 4. éœ€è¦é™çº§èƒ½åŠ›                                                  â”‚       â”‚
â”‚  â”‚    - CDN å¯èƒ½æŒ‚æ‰                                                â”‚       â”‚
â”‚  â”‚    - éœ€è¦é™çº§åˆ°æœ¬åœ°ç‰ˆæœ¬                                          â”‚       â”‚
â”‚  â”‚    - éœ€è¦å®¹é”™å¤„ç†                                                â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚ 5. éœ€è¦è¿è¡Œæ—¶å†³ç­–                                                â”‚       â”‚
â”‚  â”‚    - æŒ‰éœ€åŠ è½½ï¼ˆæ ¹æ®æƒé™ã€åœºæ™¯ï¼‰                                  â”‚       â”‚
â”‚  â”‚    - åŠ¨æ€åˆ‡æ¢ CDN                                                â”‚       â”‚
â”‚  â”‚    - è¿è¡Œæ—¶é…ç½®                                                  â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â”‚ ç¤ºä¾‹åœºæ™¯ï¼š                                                       â”‚       â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚       â”‚
â”‚  â”‚ â”‚ åœºæ™¯ï¼šé¢å‘ C ç«¯çš„ SaaS äº§å“                                â”‚   â”‚       â”‚
â”‚  â”‚ â”‚ - éƒ¨ç½²åœ¨å…¨çƒå¤šä¸ªåŒºåŸŸ                                       â”‚   â”‚       â”‚
â”‚  â”‚ â”‚ - æœ‰å…è´¹ç‰ˆ/ä¸“ä¸šç‰ˆ/ä¼ä¸šç‰ˆ                                   â”‚   â”‚       â”‚
â”‚  â”‚ â”‚ - éœ€è¦ç°åº¦å‘å¸ƒæ–°åŠŸèƒ½                                       â”‚   â”‚       â”‚
â”‚  â”‚ â”‚ - ç»„ä»¶ç”±ä¸åŒå›¢é˜Ÿç»´æŠ¤                                       â”‚   â”‚       â”‚
â”‚  â”‚ â”‚ - éœ€è¦å¿«é€Ÿä¿®å¤çº¿ä¸Šé—®é¢˜                                     â”‚   â”‚       â”‚
â”‚  â”‚ â”‚                                                           â”‚   â”‚       â”‚
â”‚  â”‚ â”‚ â†’ å¿…é¡»ä½¿ç”¨ loadRemoteModule()ï¼                            â”‚   â”‚       â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚       â”‚
â”‚  â”‚                                                                 â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                                                                             â”‚
â”‚  ä¸¤ç§æ–¹å¼å¯ä»¥ç»“åˆä½¿ç”¨ï¼                                                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
â”‚                                                                             â”‚
â”‚  å®é™…ä¸Šï¼Œå¾ˆå¤šé¡¹ç›®åŒæ—¶ä½¿ç”¨ä¸¤ç§æ–¹å¼ï¼š                                            â”‚
â”‚                                                                             â”‚
â”‚  // webpack.config.js - ç”¨äºå¼€å‘ç¯å¢ƒ                                         â”‚
â”‚  new ModuleFederationPlugin({                                               â”‚
â”‚    remotes: {                                                               â”‚
â”‚      kdocs: 'kdocs@http://localhost:8080/mf/kdocs-mf.js',  // æœ¬åœ°å¼€å‘       â”‚
â”‚    },                                                                       â”‚
â”‚  })                                                                         â”‚
â”‚                                                                             â”‚
â”‚  // ä¸šåŠ¡ä»£ç  - ç”¨äºç”Ÿäº§ç¯å¢ƒ                                                   â”‚
â”‚  if (process.env.NODE_ENV === 'development') {                              â”‚
â”‚    // å¼€å‘ç¯å¢ƒï¼šä½¿ç”¨ webpack.config.js é…ç½®çš„ remote                          â”‚
â”‚    const module = await import('kdocs/UikitFinderV2')                       â”‚
â”‚  } else {                                                                   â”‚
â”‚    // ç”Ÿäº§ç¯å¢ƒï¼šä½¿ç”¨ loadRemoteModule åŠ¨æ€åŠ è½½                                â”‚
â”‚    const module = await loadRemoteModule({                                  â”‚
â”‚      containerName: 'kdocs',                                                â”‚
â”‚      exposeModuleName: 'UikitFinderV2',                                     â”‚
â”‚      url: getProductionUrl(),  // è¿è¡Œæ—¶å†³å®š                                 â”‚
â”‚    })                                                                       â”‚
â”‚  }                                                                          â”‚
â”‚                                                                             â”‚
â”‚  ä¼˜åŠ¿ï¼š                                                                       â”‚
â”‚  âœ… å¼€å‘ç¯å¢ƒï¼šäº«å—é™æ€é…ç½®çš„ä¾¿åˆ©ï¼ˆç±»å‹æç¤ºã€HMRï¼‰                              â”‚
â”‚  âœ… ç”Ÿäº§ç¯å¢ƒï¼šäº«å—åŠ¨æ€åŠ è½½çš„çµæ´»æ€§ï¼ˆç°åº¦ã€é™çº§ï¼‰                                â”‚
â”‚                                                                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                                                                             â”‚
â”‚  ä¸ºä»€ä¹ˆå¾ˆå¤šäººç”¨ webpack.config.jsï¼Ÿ                                           â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
â”‚                                                                             â”‚
â”‚  1. å®˜æ–¹æ–‡æ¡£ä¸»æ¨è¿™ç§æ–¹å¼                                                      â”‚
â”‚     Webpack å®˜æ–¹æ–‡æ¡£çš„ç¤ºä¾‹éƒ½æ˜¯é™æ€é…ç½®                                         â”‚
â”‚     â†’ å¾ˆå¤šäººç…§ç€æ–‡æ¡£å­¦ï¼Œå°±ç”¨äº†è¿™ç§æ–¹å¼                                         â”‚
â”‚                                                                             â”‚
â”‚  2. é€‚åˆå¤§å¤šæ•°ç®€å•åœºæ™¯                                                        â”‚
â”‚     80% çš„é¡¹ç›®éœ€æ±‚ä¸å¤æ‚ï¼Œé™æ€é…ç½®å°±å¤Ÿç”¨                                       â”‚
â”‚     â†’ æ²¡å¿…è¦ä¸ºäº† 20% çš„éœ€æ±‚å¢åŠ å¤æ‚åº¦                                         â”‚
â”‚                                                                             â”‚
â”‚  3. å­¦ä¹ æ›²çº¿æ›´å¹³ç¼“                                                           â”‚
â”‚     é™æ€é…ç½®æ›´ç›´è§‚ï¼Œæ–°æ‰‹å®¹æ˜“ç†è§£                                               â”‚
â”‚     â†’ loadRemoteModule éœ€è¦ç†è§£è¿è¡Œæ—¶åŠ è½½æœºåˆ¶                                 â”‚
â”‚                                                                             â”‚
â”‚  4. å¼€å‘ä½“éªŒæ›´å¥½                                                             â”‚
â”‚     IDE æ”¯æŒæ›´å¥½ï¼ˆè‡ªåŠ¨è¡¥å…¨ã€ç±»å‹æç¤ºï¼‰                                         â”‚
â”‚     â†’ å†™ä»£ç æ—¶æ›´èˆ’æœ                                                          â”‚
â”‚                                                                             â”‚
â”‚  5. å¾ˆå¤šäººæ²¡é‡åˆ°å¤æ‚åœºæ™¯                                                      â”‚
â”‚     åªæœ‰å½“ä½ éœ€è¦ç°åº¦å‘å¸ƒã€å¤šç¯å¢ƒéƒ¨ç½²æ—¶ï¼Œæ‰ä¼šå‘ç°é™æ€é…ç½®çš„å±€é™                    â”‚
â”‚     â†’ å¤§éƒ¨åˆ†äººçš„é¡¹ç›®è¿˜æ²¡åˆ°é‚£ä¸ªé˜¶æ®µ                                            â”‚
â”‚                                                                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                                                                             â”‚
â”‚  ä½ ä»¬å…¬å¸ä¸ºä»€ä¹ˆé€‰æ‹© loadRemoteModule()ï¼Ÿ                                      â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
â”‚                                                                             â”‚
â”‚  æ ¹æ®æˆ‘åˆ†æä½ ä»¬çš„ä»£ç ï¼Œä½ ä»¬çš„åœºæ™¯æ˜¯ï¼š                                          â”‚
â”‚                                                                             â”‚
â”‚  âœ“ å¤šä¸ªç¯å¢ƒï¼ˆå¼€å‘/æµ‹è¯•/é¢„å‘å¸ƒ/ç”Ÿäº§ï¼‰                                           â”‚
â”‚  âœ“ å¤šä¸ªé¡¹ç›®ï¼ˆcloudã€apps-public ç­‰ï¼‰                                         â”‚
â”‚  âœ“ ç»„ä»¶ç”±ä¸åŒå›¢é˜Ÿç»´æŠ¤ï¼ˆuikit å›¢é˜Ÿ vs ä¸šåŠ¡å›¢é˜Ÿï¼‰                                â”‚
â”‚  âœ“ éœ€è¦ç‹¬ç«‹éƒ¨ç½²ï¼ˆmf é¡¹ç›®æ›´æ–°ä¸å½±å“ Hostï¼‰                                      â”‚
â”‚  âœ“ éœ€è¦å¿«é€Ÿä¿®å¤ï¼ˆRemote æ›´æ–° Host ä¸ç”¨é‡æ–°æ„å»ºï¼‰                               â”‚
â”‚  âœ“ æœ‰é…ç½®ä¸­å¿ƒï¼ˆä» URL åŠ¨æ€è·å–èµ„æºåœ°å€ï¼‰                                       â”‚
â”‚                                                                             â”‚
â”‚  â†’ è¿™æ˜¯å…¸å‹çš„"å¤æ‚åœºæ™¯"ï¼Œæ‰€ä»¥é€‰æ‹© loadRemoteModule() æ˜¯æ­£ç¡®çš„ï¼                â”‚
â”‚                                                                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                                                                             â”‚
â”‚  æ€»ç»“ï¼šæ²¡æœ‰ç»å¯¹çš„å¥½åï¼Œåªæœ‰é€‚ä¸é€‚åˆ                                            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
â”‚                                                                             â”‚
â”‚  webpack.config.js:                                                         â”‚
â”‚  ä¼˜ç‚¹ï¼šç®€å•ã€ç›´è§‚ã€å¼€å‘ä½“éªŒå¥½                                                  â”‚
â”‚  ç¼ºç‚¹ï¼šä¸å¤Ÿçµæ´»                                                               â”‚
â”‚  é€‚åˆï¼šç®€å•é¡¹ç›®ã€å•ä¸€ç¯å¢ƒã€ç¨³å®šçš„ä¾èµ–                                          â”‚
â”‚                                                                             â”‚
â”‚  loadRemoteModule():                                                        â”‚
â”‚  ä¼˜ç‚¹ï¼šçµæ´»ã€å¯åŠ¨æ€é…ç½®ã€æ”¯æŒå¤æ‚åœºæ™¯                                          â”‚
â”‚  ç¼ºç‚¹ï¼šåˆæœŸä»£ç ç¨å¤æ‚ã€å¼€å‘ä½“éªŒç¨å·®                                            â”‚
â”‚  é€‚åˆï¼šå¤æ‚é¡¹ç›®ã€å¤šç¯å¢ƒã€éœ€è¦ç°åº¦/é™çº§                                         â”‚
â”‚                                                                             â”‚
â”‚  ç±»æ¯”ï¼š                                                                       â”‚
â”‚  webpack.config.js = è‡ªåŠ¨æŒ¡ï¼ˆç®€å•æ˜“ç”¨ï¼Œé€‚åˆæ—¥å¸¸ä»£æ­¥ï¼‰                          â”‚
â”‚  loadRemoteModule() = æ‰‹åŠ¨æŒ¡ï¼ˆçµæ´»å¯æ§ï¼Œé€‚åˆä¸“ä¸šé©¾é©¶ï¼‰                        â”‚
â”‚                                                                             â”‚
â”‚  é€‰å“ªä¸ªï¼Ÿçœ‹ä½ çš„éœ€æ±‚ï¼                                                         â”‚
â”‚                                                                             â”‚
â”‚  å°é¡¹ç›® â†’ webpack.config.js                                                  â”‚
â”‚  å¤§é¡¹ç›®/å¤æ‚åœºæ™¯ â†’ loadRemoteModule()                                        â”‚
â”‚  ä¸¤è€…ç»“åˆ â†’ æœ€ä½³å®è·µï¼                                                        â”‚
â”‚                                                                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                                                                             â”‚
â”‚  åœºæ™¯ 2: ä½¿ç”¨ Webpack åŸç”Ÿ APIï¼ˆå¤æ‚ã€ç¹çï¼‰                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
â”‚                                                                             â”‚
â”‚  // ä¸ä½¿ç”¨ @kso/mfï¼Œæ‰‹å†™åŠ è½½é€»è¾‘                                              â”‚
â”‚                                                                             â”‚
â”‚  async function loadRemoteModule() {                                        â”‚
â”‚    try {                                                                    â”‚
â”‚      // æ­¥éª¤ 1: æ‰‹åŠ¨åˆ›å»º script æ ‡ç­¾                                          â”‚
â”‚      const script = document.createElement('script')                        â”‚
â”‚      script.src = 'https://cdn.example.com/mf/kdocs-mf.js'                  â”‚
â”‚      script.onload = () => { console.log('Loaded') }                        â”‚
â”‚      script.onerror = () => { console.error('Failed') }                     â”‚
â”‚      document.head.appendChild(script)                                      â”‚
â”‚                                                                             â”‚
â”‚      // æ­¥éª¤ 2: ç­‰å¾… script åŠ è½½å®Œæˆï¼ˆæ‰‹å†™ Promiseï¼‰                           â”‚
â”‚      await new Promise((resolve, reject) => {                               â”‚
â”‚        script.onload = resolve                                              â”‚
â”‚        script.onerror = reject                                              â”‚
â”‚        setTimeout(reject, 120000) // æ‰‹å†™è¶…æ—¶                                â”‚
â”‚      })                                                                     â”‚
â”‚                                                                             â”‚
â”‚      // æ­¥éª¤ 3: æ£€æŸ¥å®¹å™¨æ˜¯å¦å­˜åœ¨                                              â”‚
â”‚      if (typeof window.kdocs === 'undefined') {                             â”‚
â”‚        throw new Error('Container not found')                               â”‚
â”‚      }                                                                      â”‚
â”‚                                                                             â”‚
â”‚      // æ­¥éª¤ 4: åˆå§‹åŒ–å…±äº«ä¾èµ–ï¼ˆè¿™ä¸€æ­¥å¾ˆå¤šäººä¼šå¿˜ï¼ï¼‰                             â”‚
â”‚      const container = window.kdocs                                         â”‚
â”‚      await __webpack_init_sharing__('default')                              â”‚
â”‚      const shareScope = __webpack_share_scopes__.default                    â”‚
â”‚                                                                             â”‚
â”‚      // è¿˜è¦æ‰‹åŠ¨æ·»åŠ è‡ªå®šä¹‰å…±äº«æ¨¡å—                                             â”‚
â”‚      shareScope.vue = shareScope.vue || {}                                  â”‚
â”‚      shareScope.vue['2.6.14'] = {                                           â”‚
â”‚        get: () => Promise.resolve(() => ({ default: Vue })),                â”‚
â”‚        loaded: 1,                                                           â”‚
â”‚        from: 'host'                                                         â”‚
â”‚      }                                                                      â”‚
â”‚                                                                             â”‚
â”‚      // æ­¥éª¤ 5: è°ƒç”¨å®¹å™¨çš„ init                                               â”‚
â”‚      if (!container.__initialized) {                                        â”‚
â”‚        await container.init(shareScope)                                     â”‚
â”‚        container.__initialized = true                                       â”‚
â”‚      }                                                                      â”‚
â”‚                                                                             â”‚
â”‚      // æ­¥éª¤ 6: è·å–æ¨¡å—                                                      â”‚
â”‚      const factory = await container.get('./UikitFinderV2')                 â”‚
â”‚      const module = factory()                                               â”‚
â”‚                                                                             â”‚
â”‚      return module                                                          â”‚
â”‚                                                                             â”‚
â”‚    } catch (err) {                                                          â”‚
â”‚      console.error('Load failed:', err)                                     â”‚
â”‚      // é™çº§å¤„ç†ï¼Ÿ                                                           â”‚
â”‚    }                                                                        â”‚
â”‚  }                                                                          â”‚
â”‚                                                                             â”‚
â”‚  é—®é¢˜ï¼š                                                                       â”‚
â”‚  âŒ ä»£ç  50+ è¡Œï¼Œå¤æ‚æ˜“é”™                                                      â”‚
â”‚  âŒ æ¯ä¸ªé¡¹ç›®éƒ½è¦å†™ä¸€é                                                         â”‚
â”‚  âŒ æ²¡æœ‰é˜²é‡å¤åŠ è½½                                                            â”‚
â”‚  âŒ æ²¡æœ‰å¹¶å‘æ§åˆ¶                                                              â”‚
â”‚  âŒ æ²¡æœ‰ SRI æ ¡éªŒ                                                             â”‚
â”‚  âŒ æ²¡æœ‰è¯·æ±‚èŠ‚æµ                                                              â”‚
â”‚  âŒ æ²¡æœ‰æ€§èƒ½ç›‘æ§                                                              â”‚
â”‚  âŒ é”™è¯¯å¤„ç†ä¸å®Œå–„                                                            â”‚
â”‚  âŒ å›¢é˜Ÿæˆå‘˜æ°´å¹³ä¸ä¸€ï¼Œå®ç°è´¨é‡å‚å·®ä¸é½                                           â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               æœ‰äº† loadRemoteModule() çš„ä¸–ç•Œ ğŸ‰                              â”‚
â”‚                                                                             â”‚
â”‚  @kso/mf å°è£…äº†æ‰€æœ‰å¤æ‚é€»è¾‘ï¼Œæä¾›ç»Ÿä¸€ã€ç®€æ´ã€å¯é çš„ APIï¼                        â”‚
â”‚                                                                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚                                                                             â”‚
â”‚  ä½¿ç”¨æ–¹å¼ï¼š                                                                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
â”‚                                                                             â”‚
â”‚  import { loadRemoteModule } from '@kso/mf'                                 â”‚
â”‚  import Vue from 'vue'                                                      â”‚
â”‚                                                                             â”‚
â”‚  // ä»…éœ€ 1 ä¸ªå‡½æ•°è°ƒç”¨ï¼                                                       â”‚
â”‚  const module = await loadRemoteModule({                                    â”‚
â”‚    containerName: 'kdocs',                                                  â”‚
â”‚    exposeModuleName: 'UikitFinderV2',                                       â”‚
â”‚    url: getRemoteUrl(),  // âœ… è¿è¡Œæ—¶åŠ¨æ€è·å– URL                             â”‚
â”‚    manifest: getManifestUrl(),  // âœ… SRI æ”¯æŒ                               â”‚
â”‚    shareModule: {  // âœ… ç®€æ´çš„å…±äº«ä¾èµ–é…ç½®                                    â”‚
â”‚      vue: {                                                                 â”‚
â”‚        '2.6.14': {                                                          â”‚
â”‚          from: 'host',                                                      â”‚
â”‚          get: () => Promise.resolve(() => ({ default: Vue })),              â”‚
â”‚          loaded: 1                                                          â”‚
â”‚        }                                                                    â”‚
â”‚      }                                                                      â”‚
â”‚    }                                                                        â”‚
â”‚  })                                                                         â”‚
â”‚                                                                             â”‚
â”‚  // ä½¿ç”¨æ¨¡å—                                                                 â”‚
â”‚  module.mount(options, container)                                           â”‚
â”‚                                                                             â”‚
â”‚  ä¼˜åŠ¿ï¼š                                                                       â”‚
â”‚  âœ… ä»£ç ä» 50+ è¡Œå‡å°‘åˆ° 10+ è¡Œ                                                 â”‚
â”‚  âœ… è¿è¡Œæ—¶åŠ¨æ€ URLï¼Œæ”¯æŒç¯å¢ƒåˆ‡æ¢                                                â”‚
â”‚  âœ… è‡ªåŠ¨å¤„ç†æ‰€æœ‰åº•å±‚ç»†èŠ‚                                                       â”‚
â”‚  âœ… å†…ç½®é˜²é‡å¤åŠ è½½                                                            â”‚
â”‚  âœ… å†…ç½®å¹¶å‘æ§åˆ¶                                                              â”‚
â”‚  âœ… å†…ç½® SRI æ ¡éªŒ + å¤±è´¥é‡è¯•                                                   â”‚
â”‚  âœ… å†…ç½®æ€§èƒ½ç›‘æ§ï¼ˆ?mfdebugï¼‰                                                  â”‚
â”‚  âœ… ç»Ÿä¸€çš„é”™è¯¯å¤„ç†                                                            â”‚
â”‚  âœ… å›¢é˜Ÿç»Ÿä¸€æ ‡å‡†ï¼Œä»£ç è´¨é‡æœ‰ä¿éšœ                                                â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä»£ç å¯¹æ¯”ï¼šå®ŒæˆåŒæ ·çš„åŠŸèƒ½**

```javascript
// âŒ æ²¡æœ‰ @kso/mfï¼šæ‰‹å†™ 50+ è¡Œ
async function loadModule() {
  const script = document.createElement('script')
  script.src = url
  
  // æ£€æŸ¥é‡å¤
  const existing = Array.from(document.scripts).find(s => s.src === url)
  if (existing) { /* ... */ }
  
  // è¶…æ—¶å¤„ç†
  let timeout = setTimeout(() => { /* ... */ }, 120000)
  
  // åŠ è½½å®Œæˆ
  await new Promise((resolve, reject) => {
    script.onload = () => {
      clearTimeout(timeout)
      resolve()
    }
    script.onerror = reject
  })
  
  document.head.appendChild(script)
  
  // æ£€æŸ¥å®¹å™¨
  if (!window.kdocs) throw new Error('...')
  
  // åˆå§‹åŒ–å…±äº«
  await __webpack_init_sharing__('default')
  const shareScope = __webpack_share_scopes__.default
  
  // æ‰‹åŠ¨æ·»åŠ  Vue
  shareScope.vue = shareScope.vue || {}
  shareScope.vue['2.6.14'] = {
    get: () => Promise.resolve(() => ({ default: Vue })),
    loaded: 1,
    from: 'host'
  }
  
  // è°ƒç”¨ init
  if (!window.kdocs.__initialized) {
    await window.kdocs.init(shareScope)
    window.kdocs.__initialized = true
  }
  
  // è·å–æ¨¡å—
  const factory = await window.kdocs.get('./UikitFinderV2')
  return factory()
}

// âœ… ä½¿ç”¨ @kso/mfï¼šç®€æ´ 10 è¡Œ
import { loadRemoteModule } from '@kso/mf'

const module = await loadRemoteModule({
  containerName: 'kdocs',
  exposeModuleName: 'UikitFinderV2',
  url: 'https://cdn.example.com/mf/kdocs-mf.js',
  shareModule: {
    vue: {
      '2.6.14': {
        from: 'host',
        get: () => Promise.resolve(() => ({ default: Vue })),
        loaded: 1
      }
    }
  }
})
```

**è¿è¡Œæ—¶åŠ¨æ€é…ç½®çš„èƒ½åŠ›**

```javascript
// âœ… æ ¹æ®ç¯å¢ƒåŠ¨æ€åˆ‡æ¢ URL
function getRemoteUrl() {
  const env = process.env.NODE_ENV
  
  if (env === 'development') {
    return 'http://localhost:8080/mf/kdocs-mf.js'
  } else if (env === 'test') {
    return 'https://test.example.com/mf/kdocs-mf.js'
  } else {
    return 'https://cdn.example.com/mf/kdocs-mf.js'
  }
}

const module = await loadRemoteModule({
  containerName: 'kdocs',
  exposeModuleName: 'UikitFinderV2',
  url: getRemoteUrl(),  // âœ… è¿è¡Œæ—¶å†³å®šï¼
})

// âœ… æ ¹æ®ç”¨æˆ·æƒé™åŠ è½½ä¸åŒç‰ˆæœ¬
const isVIP = user.vip
const url = isVIP 
  ? 'https://cdn.example.com/mf/kdocs-pro-mf.js'  // Pro ç‰ˆæœ¬
  : 'https://cdn.example.com/mf/kdocs-mf.js'      // æ™®é€šç‰ˆæœ¬

const module = await loadRemoteModule({
  containerName: 'kdocs',
  exposeModuleName: 'UikitFinderV2',
  url,  // âœ… åŠ¨æ€å†³å®šåŠ è½½å“ªä¸ªç‰ˆæœ¬ï¼
})

// âœ… ç°åº¦å‘å¸ƒæ”¯æŒ
const version = Math.random() < 0.1 ? 'v2' : 'v1'  // 10% ç”¨æˆ·ç”¨æ–°ç‰ˆæœ¬
const url = `https://cdn.example.com/mf/kdocs-${version}-mf.js`

const module = await loadRemoteModule({
  containerName: 'kdocs',
  exposeModuleName: 'UikitFinderV2',
  url,  // âœ… æ”¯æŒç°åº¦å‘å¸ƒï¼
})
```

**é”™è¯¯å¤„ç†å’Œé™çº§**

```javascript
// âœ… ä¼˜é›…çš„é”™è¯¯å¤„ç†
async function loadFinderWithFallback() {
  try {
    // å°è¯•åŠ è½½è¿œç¨‹æ¨¡å—
    const remoteModule = await loadRemoteModule({
      containerName: 'kdocs',
      exposeModuleName: 'UikitFinderV2',
      url: 'https://cdn.example.com/mf/kdocs-mf.js',
    })
    
    return remoteModule
    
  } catch (err) {
    console.error('è¿œç¨‹æ¨¡å—åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨æœ¬åœ°ç‰ˆæœ¬', err)
    
    // é™çº§ï¼šä½¿ç”¨æœ¬åœ°å®‰è£…çš„ NPM åŒ…
    const { default: LocalFinder } = await import('@uikit/vue-finder')
    return LocalFinder
  }
}

// ä¸šåŠ¡ä»£ç ä¸éœ€è¦å…³å¿ƒæ˜¯è¿œç¨‹è¿˜æ˜¯æœ¬åœ°
const Finder = await loadFinderWithFallback()
Finder.mount(options, container)
```

**ä¸ºä»€ä¹ˆå…¬å¸è¦è‡ªå·±å°è£… @kso/mfï¼Ÿ**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ä¸ºä»€ä¹ˆä¸ç›´æ¥ç”¨ Webpack åŸç”Ÿ APIï¼Ÿ              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  1. ç»Ÿä¸€æ ‡å‡†                                                     â”‚
â”‚     æ‰€æœ‰é¡¹ç›®ä½¿ç”¨åŒä¸€å¥— APIï¼Œé™ä½å­¦ä¹ æˆæœ¬                          â”‚
â”‚                                                                 â”‚
â”‚  2. ä¸šåŠ¡å®šåˆ¶                                                     â”‚
â”‚     - æ·»åŠ  SRI æ ¡éªŒï¼ˆå®‰å…¨éœ€æ±‚ï¼‰                                   â”‚
â”‚     - æ·»åŠ æ€§èƒ½ç›‘æ§ï¼ˆ?mfdebugï¼‰                                   â”‚
â”‚     - æ·»åŠ è¯·æ±‚èŠ‚æµï¼ˆä¼˜åŒ–æ€§èƒ½ï¼‰                                    â”‚
â”‚     - å…œåº•é‡è¯•æœºåˆ¶ï¼ˆæé«˜å¯ç”¨æ€§ï¼‰                                  â”‚
â”‚                                                                 â”‚
â”‚  3. æŒç»­ä¼˜åŒ–                                                     â”‚
â”‚     åœ¨ä¸€ä¸ªåœ°æ–¹æ”¹è¿›ï¼Œæ‰€æœ‰é¡¹ç›®éƒ½å—ç›Š                                â”‚
â”‚                                                                 â”‚
â”‚  4. å±è”½å¤æ‚åº¦                                                   â”‚
â”‚     å¼€å‘è€…ä¸éœ€è¦ç†è§£åº•å±‚ç»†èŠ‚ï¼Œä¸“æ³¨ä¸šåŠ¡å¼€å‘                         â”‚
â”‚                                                                 â”‚
â”‚  5. é Webpack 5 é¡¹ç›®æ”¯æŒ                                        â”‚
â”‚     æœ‰äº›è€é¡¹ç›®ä¸æ˜¯ Webpack 5ï¼Œä¹Ÿèƒ½ç”¨ MF                           â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ€»ç»“ï¼šloadRemoteModule() çš„ä»·å€¼**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚  æ²¡æœ‰ loadRemoteModule()         æœ‰ loadRemoteModule()          â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•             â”‚
â”‚                                                                 â”‚
â”‚  æ¯ä¸ªé¡¹ç›®è‡ªå·±å®ç°     â†’          ç»Ÿä¸€çš„æ ‡å‡† API                   â”‚
â”‚  ä»£ç  50+ è¡Œ          â†’          ä»£ç  10 è¡Œ                      â”‚
â”‚  å®¹æ˜“å‡ºé”™             â†’          ç»è¿‡å……åˆ†æµ‹è¯•                     â”‚
â”‚  åŠŸèƒ½ä¸å®Œå–„           â†’          åŠŸèƒ½å®Œå¤‡                         â”‚
â”‚  éš¾ä»¥ç»´æŠ¤             â†’          é›†ä¸­ç»´æŠ¤                         â”‚
â”‚  é‡å¤åŠ³åŠ¨             â†’          ä¸€æ¬¡å°è£…ï¼Œå¤„å¤„å¤ç”¨                â”‚
â”‚  æ— æ³•æŒç»­ä¼˜åŒ–         â†’          æŒç»­è¿­ä»£ä¼˜åŒ–                     â”‚
â”‚                                                                 â”‚
â”‚  å°±åƒï¼š                                                          â”‚
â”‚  æ¯æ¬¡éƒ½è‡ªå·±åšé¥­       â†’          å¤–å–/å¿«é¤ï¼ˆæ ‡å‡†åŒ–æœåŠ¡ï¼‰           â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ğŸ¯ é€šä¿—ç±»æ¯”ï¼šä¹é«˜ç§¯æœ¨

- **Remote åº”ç”¨** = ä¹é«˜å·¥å‚ï¼Œç”Ÿäº§å„ç§ç§¯æœ¨å—ï¼ˆç»„ä»¶ï¼‰
- **Host åº”ç”¨** = ä½ å®¶çš„ä¹é«˜æ¡Œï¼Œä»å·¥å‚æ‹¿ç§¯æœ¨æ¥æ‹¼
- **å…±äº«ä¾èµ–** = æ‰€æœ‰ç§¯æœ¨ç”¨åŒä¸€ç§å¡æ‰£æ ‡å‡†ï¼ˆä¸ç„¶æ‹¼ä¸ä¸Šï¼‰

#### ğŸ’» ä»£ç ç¤ºä¾‹ï¼ˆå°±æ˜¯æˆ‘ä»¬åˆšæ‰åšçš„ï¼‰

**Remote ç«¯ï¼ˆmf é¡¹ç›®ï¼‰æš´éœ²æ¨¡å—ï¼š**

```javascript
// webpack.config.js
new ModuleFederationPlugin({
  name: 'kdocs',
  filename: 'kdocs-mf.js',
  exposes: {
    './UikitFinderV2': './src/components/UikitFinderV2.js',  // æš´éœ²ç»„ä»¶
  },
  shared: {
    vue: { singleton: true },  // å…±äº« Vueï¼Œå…¨å±€åªæœ‰ä¸€ä»½
  },
})
```

**Host ç«¯ï¼ˆapps-public é¡¹ç›®ï¼‰æ¶ˆè´¹æ¨¡å—ï¼š**

```javascript
// åŠ¨æ€åŠ è½½è¿œç¨‹æ¨¡å—
import { loadRemoteModule } from '@kso/mf'

const UikitFinderV2 = await loadRemoteModule({
  containerName: 'kdocs',
  exposeModuleName: 'UikitFinderV2',
  url: 'https://xxx/mf/kdocs-mf.js',
})

// ä½¿ç”¨è¿œç¨‹ç»„ä»¶
UikitFinderV2.mount(options, container)
```

#### âœ… é€‚ç”¨åœºæ™¯

- å¤šä¸ªåº”ç”¨éœ€è¦å…±äº«ç»„ä»¶/é€»è¾‘
- ç»„ä»¶éœ€è¦ç‹¬ç«‹æ›´æ–°ï¼Œä¸å½±å“å®¿ä¸»åº”ç”¨
- éœ€è¦è¿è¡Œæ—¶åŠ¨æ€åŠ è½½
- å›¢é˜Ÿåˆ†å¸ƒå¼å¼€å‘ï¼Œå„è‡ªç»´æŠ¤å„è‡ªçš„æ¨¡å—

#### âš ï¸ æ³¨æ„äº‹é¡¹

- éœ€è¦ Webpack 5+
- å…±äº«ä¾èµ–ç‰ˆæœ¬éœ€è¦å…¼å®¹
- ç½‘ç»œä¾èµ–ï¼ˆè¿œç¨‹æ¨¡å—åŠ è½½å¤±è´¥éœ€è¦é™çº§æ–¹æ¡ˆï¼‰

---

### ç­–ç•¥ 2ï¼šiframe åµŒå…¥

#### ğŸ“– åŸç†

**æ ¸å¿ƒæ€æƒ³**ï¼šç”¨æµè§ˆå™¨åŸç”Ÿçš„ iframe æ ‡ç­¾åµŒå…¥å®Œå…¨ç‹¬ç«‹çš„åº”ç”¨ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ä¸»åº”ç”¨                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                     Header                          â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  Menu   â”‚  â”‚         <iframe>                    â”‚  â”‚   â”‚
â”‚  â”‚         â”‚  â”‚    å®Œå…¨ç‹¬ç«‹çš„å­åº”ç”¨                   â”‚  â”‚   â”‚
â”‚  â”‚         â”‚  â”‚    æœ‰è‡ªå·±çš„ windowã€document         â”‚  â”‚   â”‚
â”‚  â”‚         â”‚  â”‚    æœ‰è‡ªå·±çš„ Vue/React å®ä¾‹           â”‚  â”‚   â”‚
â”‚  â”‚         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ğŸ¯ é€šä¿—ç±»æ¯”ï¼šç”µè§†æœºé‡Œçš„ç”»ä¸­ç”»

- ä¸»åº”ç”¨ = ç”µè§†ä¸»ç”»é¢
- iframe = ç”»ä¸­ç”»å°çª—å£
- ä¸¤ä¸ªç”»é¢å®Œå…¨ç‹¬ç«‹ï¼Œäº’ä¸å¹²æ‰°
- é€šä¿¡è¦é€šè¿‡é¥æ§å™¨ï¼ˆpostMessageï¼‰

#### ğŸ’» ä»£ç ç¤ºä¾‹

**ä¸»åº”ç”¨åµŒå…¥å­åº”ç”¨ï¼š**

```html
<template>
  <div class="container">
    <iframe 
      ref="subApp"
      src="https://sub-app.example.com/finder"
      @load="onIframeLoad"
    />
  </div>
</template>

<script>
export default {
  methods: {
    // å‘å­åº”ç”¨å‘é€æ¶ˆæ¯
    sendMessage(data) {
      this.$refs.subApp.contentWindow.postMessage(data, '*')
    },
    
    // ç›‘å¬å­åº”ç”¨æ¶ˆæ¯
    onMessage(event) {
      if (event.data.type === 'FILE_SELECTED') {
        console.log('é€‰ä¸­çš„æ–‡ä»¶:', event.data.files)
      }
    }
  },
  mounted() {
    window.addEventListener('message', this.onMessage)
  }
}
</script>
```

**å­åº”ç”¨å“åº”ä¸»åº”ç”¨ï¼š**

```javascript
// å­åº”ç”¨ä¸­
window.addEventListener('message', (event) => {
  if (event.data.type === 'GET_SELECTED_FILES') {
    // è¿”å›æ•°æ®ç»™ä¸»åº”ç”¨
    window.parent.postMessage({
      type: 'FILE_SELECTED',
      files: selectedFiles
    }, '*')
  }
})
```

#### âœ… é€‚ç”¨åœºæ™¯

- åµŒå…¥ç¬¬ä¸‰æ–¹åº”ç”¨ï¼ˆå¦‚åµŒå…¥åœ°å›¾ã€ç¼–è¾‘å™¨ï¼‰
- éœ€è¦å®Œå…¨éš”ç¦»ï¼ˆå®‰å…¨è¦æ±‚é«˜ï¼‰
- è€æ—§ç³»ç»Ÿè¿ç§»ï¼ˆç›´æ¥å¥—ä¸ªå£³ï¼‰
- æŠ€æœ¯æ ˆå®Œå…¨ä¸åŒï¼ˆä¸€ä¸ª Vueï¼Œä¸€ä¸ª Reactï¼‰

#### âš ï¸ ç¼ºç‚¹

- æ€§èƒ½å·®ï¼ˆæ¯ä¸ª iframe éƒ½æ˜¯ç‹¬ç«‹çš„æµè§ˆä¸Šä¸‹æ–‡ï¼‰
- é€šä¿¡éº»çƒ¦ï¼ˆåªèƒ½ç”¨ postMessageï¼‰
- æ ·å¼éš”ç¦»è¿‡åº¦ï¼ˆå¼¹çª—æ— æ³•è·¨è¶Š iframe è¾¹ç•Œï¼‰
- SEO ä¸å‹å¥½

---

### ç­–ç•¥ 3ï¼šqiankun / single-spaï¼ˆå¾®å‰ç«¯æ¡†æ¶ï¼‰

#### ğŸ“– åŸç†

**æ ¸å¿ƒæ€æƒ³**ï¼šåŸºäºè·¯ç”±çš„å¾®å‰ç«¯ï¼Œä¸åŒè·¯ç”±åŠ è½½ä¸åŒçš„å­åº”ç”¨ï¼Œå­åº”ç”¨æœ‰å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ä¸»åº”ç”¨ï¼ˆåŸºåº§ï¼‰                            â”‚
â”‚                                                             â”‚
â”‚   è·¯ç”±: /app1/*  â”€â”€â†’  åŠ è½½å­åº”ç”¨ 1ï¼ˆVue é¡¹ç›®ï¼‰                â”‚
â”‚   è·¯ç”±: /app2/*  â”€â”€â†’  åŠ è½½å­åº”ç”¨ 2ï¼ˆReact é¡¹ç›®ï¼‰              â”‚
â”‚   è·¯ç”±: /app3/*  â”€â”€â†’  åŠ è½½å­åº”ç”¨ 3ï¼ˆAngular é¡¹ç›®ï¼‰            â”‚
â”‚                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                    å…¬å…±åŒºåŸŸï¼ˆHeaderã€Menuï¼‰           â”‚   â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚   â”‚                                                     â”‚   â”‚
â”‚   â”‚              å­åº”ç”¨æ¸²æŸ“å®¹å™¨ #container               â”‚   â”‚
â”‚   â”‚                                                     â”‚   â”‚
â”‚   â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚   â”‚    â”‚  å½“å‰æ¿€æ´»çš„å­åº”ç”¨ï¼ˆæœ‰å®Œæ•´ç”Ÿå‘½å‘¨æœŸï¼‰         â”‚     â”‚   â”‚
â”‚   â”‚    â”‚  bootstrap â†’ mount â†’ unmount            â”‚     â”‚   â”‚
â”‚   â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚   â”‚                                                     â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ğŸ¯ é€šä¿—ç±»æ¯”ï¼šå•†åœºé‡Œçš„å“ç‰Œåº—

- ä¸»åº”ç”¨ï¼ˆåŸºåº§ï¼‰ = å•†åœºå¤§æ¥¼ï¼ˆæä¾›ç”µæ¢¯ã€ç©ºè°ƒã€æ”¶é“¶ç³»ç»Ÿï¼‰
- å­åº”ç”¨ = å„ä¸ªå“ç‰Œåº—ï¼ˆNikeã€Adidasã€ä¼˜è¡£åº“ï¼‰
- æ¯ä¸ªå“ç‰Œåº—ç‹¬ç«‹è£…ä¿®ã€ç‹¬ç«‹ç»è¥
- ä½†éƒ½åœ¨å•†åœºçš„ç»Ÿä¸€ç®¡ç†ä¸‹ï¼ˆç»Ÿä¸€å…¥å£ã€ç»Ÿä¸€è¥ä¸šæ—¶é—´ï¼‰

#### ğŸ’» ä»£ç ç¤ºä¾‹

**ä¸»åº”ç”¨ï¼ˆåŸºåº§ï¼‰æ³¨å†Œå­åº”ç”¨ï¼š**

```javascript
import { registerMicroApps, start } from 'qiankun'

registerMicroApps([
  {
    name: 'vue-app',
    entry: '//localhost:7100',  // å­åº”ç”¨å…¥å£
    container: '#container',    // æ¸²æŸ“å®¹å™¨
    activeRule: '/vue',         // æ¿€æ´»è·¯ç”±
    props: { token: 'xxx' }     // ä¼ é€’ç»™å­åº”ç”¨çš„æ•°æ®
  },
  {
    name: 'react-app',
    entry: '//localhost:7200',
    container: '#container',
    activeRule: '/react',
  },
])

start()  // å¯åŠ¨ qiankun
```

**å­åº”ç”¨å¯¼å‡ºç”Ÿå‘½å‘¨æœŸï¼š**

```javascript
// å­åº”ç”¨ main.js
let instance = null

// å­åº”ç”¨åˆå§‹åŒ–
export async function bootstrap() {
  console.log('å­åº”ç”¨åˆå§‹åŒ–')
}

// å­åº”ç”¨æŒ‚è½½
export async function mount(props) {
  console.log('å­åº”ç”¨æŒ‚è½½', props)
  instance = new Vue({
    router,
    store,
    render: h => h(App)
  }).$mount(props.container.querySelector('#app'))
}

// å­åº”ç”¨å¸è½½
export async function unmount() {
  console.log('å­åº”ç”¨å¸è½½')
  instance.$destroy()
  instance = null
}
```

#### âœ… é€‚ç”¨åœºæ™¯

- å¤§å‹ä¼ä¸šåº”ç”¨ï¼ˆå¤šä¸ªä¸šåŠ¡çº¿ç‹¬ç«‹å¼€å‘ï¼‰
- æ¸è¿›å¼è¿ç§»ï¼ˆè€ç³»ç»Ÿé€æ­¥æ‹†åˆ†ï¼‰
- å¤šæŠ€æœ¯æ ˆå…±å­˜ï¼ˆéƒ¨é—¨ A ç”¨ Vueï¼Œéƒ¨é—¨ B ç”¨ Reactï¼‰
- éœ€è¦å®Œæ•´çš„åº”ç”¨çº§åˆ«éš”ç¦»

#### âš ï¸ æ³¨æ„äº‹é¡¹

- å­åº”ç”¨éœ€è¦æ”¹é€ ï¼ˆå¯¼å‡ºç”Ÿå‘½å‘¨æœŸï¼‰
- æ ·å¼éš”ç¦»éœ€è¦é¢å¤–å¤„ç†
- å…¬å…±ä¾èµ–å¯èƒ½é‡å¤åŠ è½½
- é¦–æ¬¡åŠ è½½è¾ƒæ…¢

---

### ç­–ç•¥ 4ï¼šWeb Components

#### ğŸ“– åŸç†

**æ ¸å¿ƒæ€æƒ³**ï¼šä½¿ç”¨æµè§ˆå™¨åŸç”Ÿçš„ Custom Elements å°è£…ç»„ä»¶ï¼Œè·¨æ¡†æ¶å¤ç”¨ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Web Components åŸç†                        â”‚
â”‚                                                             â”‚
â”‚   1. Custom Elementsï¼ˆè‡ªå®šä¹‰å…ƒç´ ï¼‰                           â”‚
â”‚      å®šä¹‰è‡ªå·±çš„ HTML æ ‡ç­¾: <my-button>                       â”‚
â”‚                                                             â”‚
â”‚   2. Shadow DOMï¼ˆå½±å­ DOMï¼‰                                  â”‚
â”‚      æ ·å¼å®Œå…¨éš”ç¦»ï¼Œå†…éƒ¨æ ·å¼ä¸ä¼šæ³„æ¼åˆ°å¤–éƒ¨                       â”‚
â”‚                                                             â”‚
â”‚   3. HTML Templatesï¼ˆæ¨¡æ¿ï¼‰                                  â”‚
â”‚      å¯å¤ç”¨çš„ HTML æ¨¡æ¿                                      â”‚
â”‚                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  <my-finder user-id="123">                          â”‚   â”‚
â”‚   â”‚    #shadow-root (å°é—­)                               â”‚   â”‚
â”‚   â”‚    â”œâ”€â”€ <style> å†…éƒ¨æ ·å¼ï¼Œå®Œå…¨éš”ç¦» </style>            â”‚   â”‚
â”‚   â”‚    â””â”€â”€ <div class="finder">...</div>                â”‚   â”‚
â”‚   â”‚  </my-finder>                                       â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ğŸ¯ é€šä¿—ç±»æ¯”ï¼šUSB è®¾å¤‡

- Web Component = USB è®¾å¤‡ï¼ˆé¼ æ ‡ã€é”®ç›˜ã€Uç›˜ï¼‰
- ä»»ä½•ç”µè„‘ = ä»»ä½•æ¡†æ¶ï¼ˆVueã€Reactã€åŸç”Ÿ HTMLï¼‰
- å³æ’å³ç”¨ï¼Œä¸éœ€è¦è£…é©±åŠ¨
- è®¾å¤‡å†…éƒ¨æ€ä¹ˆå®ç°çš„ï¼Œç”µè„‘ä¸å…³å¿ƒ

#### ğŸ’» ä»£ç ç¤ºä¾‹

**å®šä¹‰ Web Componentï¼š**

```javascript
class MyFinder extends HTMLElement {
  constructor() {
    super()
    // åˆ›å»º Shadow DOMï¼Œæ ·å¼éš”ç¦»
    this.attachShadow({ mode: 'open' })
  }

  // ç›‘å¬çš„å±æ€§
  static get observedAttributes() {
    return ['user-id', 'action']
  }

  // å…ƒç´ æŒ‚è½½åˆ° DOM æ—¶
  connectedCallback() {
    this.render()
  }

  // å±æ€§å˜åŒ–æ—¶
  attributeChangedCallback(name, oldVal, newVal) {
    this.render()
  }

  render() {
    const userId = this.getAttribute('user-id')
    const action = this.getAttribute('action') || 'selectFile'
    
    this.shadowRoot.innerHTML = `
      <style>
        .finder { 
          border: 1px solid #ccc; 
          padding: 20px; 
        }
        /* è¿™äº›æ ·å¼å®Œå…¨éš”ç¦»ï¼Œä¸ä¼šå½±å“å¤–éƒ¨ */
      </style>
      <div class="finder">
        <h3>æ–‡ä»¶é€‰æ‹©å™¨</h3>
        <p>ç”¨æˆ·ID: ${userId}</p>
        <p>æ“ä½œ: ${action}</p>
        <button id="confirm">ç¡®è®¤</button>
      </div>
    `
    
    // ç»‘å®šäº‹ä»¶
    this.shadowRoot.getElementById('confirm').addEventListener('click', () => {
      this.dispatchEvent(new CustomEvent('file-selected', {
        detail: { files: ['file1.doc', 'file2.xlsx'] }
      }))
    })
  }
}

// æ³¨å†Œè‡ªå®šä¹‰å…ƒç´ 
customElements.define('my-finder', MyFinder)
```

**åœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨ï¼š**

```html
<!-- åŸç”Ÿ HTML -->
<my-finder user-id="123" action="selectFile"></my-finder>

<!-- Vue ä¸­ -->
<template>
  <my-finder 
    :user-id="userId" 
    @file-selected="handleSelect"
  />
</template>

<!-- React ä¸­ -->
<my-finder 
  user-id={userId} 
  ref={el => el.addEventListener('file-selected', handleSelect)}
/>
```

#### âœ… é€‚ç”¨åœºæ™¯

- è·¨æ¡†æ¶ç»„ä»¶å¤ç”¨ï¼ˆè®¾è®¡ç³»ç»Ÿã€UI ç»„ä»¶åº“ï¼‰
- éœ€è¦å¼ºæ ·å¼éš”ç¦»
- æ¸è¿›å¢å¼ºï¼ˆç»™è€é¡µé¢åŠ æ–°åŠŸèƒ½ï¼‰
- åµŒå…¥å¼ç»„ä»¶ï¼ˆåµŒå…¥åˆ°ä»»æ„ç½‘ç«™ï¼‰

#### âš ï¸ æ³¨æ„äº‹é¡¹

- å­¦ä¹ æˆæœ¬è¾ƒé«˜
- å¤æ‚çŠ¶æ€ç®¡ç†ä¸æ–¹ä¾¿
- éƒ¨åˆ†è€æµè§ˆå™¨éœ€è¦ polyfill
- ä¸æ¡†æ¶çš„åŒå‘ç»‘å®šéœ€è¦é¢å¤–å¤„ç†

---

### ç­–ç•¥ 5ï¼šNPM åŒ… + åŠ¨æ€åŠ è½½

#### ğŸ“– åŸç†

**æ ¸å¿ƒæ€æƒ³**ï¼šå°†ç»„ä»¶å‘å¸ƒä¸º NPM åŒ…ï¼Œé€šè¿‡åŠ¨æ€ import æŒ‰éœ€åŠ è½½ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚   NPM Registry                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  @uikit/vue-finderV2@1.56.2                         â”‚   â”‚
â”‚   â”‚  @uikit/vue-finder@1.55.0                           â”‚   â”‚
â”‚   â”‚  @company/share-dialog@2.0.0                        â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                         â†“ npm install                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  Host åº”ç”¨                                          â”‚   â”‚
â”‚   â”‚                                                     â”‚   â”‚
â”‚   â”‚  // é™æ€å¯¼å…¥ï¼ˆæ‰“åŒ…è¿› bundleï¼‰                         â”‚   â”‚
â”‚   â”‚  import Finder from '@uikit/vue-finder'             â”‚   â”‚
â”‚   â”‚                                                     â”‚   â”‚
â”‚   â”‚  // åŠ¨æ€å¯¼å…¥ï¼ˆæŒ‰éœ€åŠ è½½ï¼Œä»£ç åˆ†å‰²ï¼‰                     â”‚   â”‚
â”‚   â”‚  const Finder = () => import('@uikit/vue-finder')   â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ğŸ¯ é€šä¿—ç±»æ¯”ï¼šå¤–å– vs è‡ªå·±åšé¥­

- NPM åŒ… = å¤–å–ï¼ˆåˆ«äººåšå¥½ï¼Œä½ ç›´æ¥ç”¨ï¼‰
- é™æ€å¯¼å…¥ = æå‰ç‚¹å¥½å¤–å–ï¼Œå’Œä½ çš„é¥­ä¸€èµ·é€æ¥
- åŠ¨æ€å¯¼å…¥ = éœ€è¦æ—¶ç°ç‚¹ï¼Œå•ç‹¬é€æ¥

#### ğŸ’» ä»£ç ç¤ºä¾‹

**å‘å¸ƒ NPM åŒ…ï¼š**

```javascript
// @uikit/vue-finderV2/src/index.js
import Finder from './components/Finder.vue'

Finder.install = (Vue) => {
  Vue.component(Finder.name, Finder)
}

export default Finder
```

**ä½¿ç”¨æ–¹é™æ€å¯¼å…¥ï¼š**

```javascript
// ç›´æ¥å¯¼å…¥ï¼Œæ‰“åŒ…æ—¶ä¼šåŒ…å«è¿›å»
import Finder from '@uikit/vue-finderV2'
import '@uikit/vue-finderV2/lib/index.css'

export default {
  components: { [Finder.name]: Finder }
}
```

**ä½¿ç”¨æ–¹åŠ¨æ€å¯¼å…¥ï¼š**

```javascript
// æŒ‰éœ€åŠ è½½ï¼Œç”Ÿæˆç‹¬ç«‹ chunk
export default {
  components: {
    'kuc-finder': () => ({
      component: import('@uikit/vue-finderV2'),
      loading: LoadingComponent,
      error: ErrorComponent,
      delay: 200,
      timeout: 3000
    })
  }
}
```

#### âœ… é€‚ç”¨åœºæ™¯

- ç»„ä»¶åº“/å·¥å…·åº“åˆ†å‘
- å›¢é˜Ÿå†…éƒ¨ä»£ç å…±äº«
- å¯¹ç‰ˆæœ¬æœ‰ä¸¥æ ¼è¦æ±‚
- ç¦»çº¿åœºæ™¯ï¼ˆä¸ä¾èµ–è¿œç¨‹æœåŠ¡ï¼‰

#### âš ï¸ æ³¨æ„äº‹é¡¹

- å‡çº§éœ€è¦é‡æ–°å®‰è£…å’Œéƒ¨ç½²
- å¤šé¡¹ç›®ä½¿ç”¨æ—¶ç‰ˆæœ¬åŒæ­¥å›°éš¾
- ä¸æ”¯æŒè¿è¡Œæ—¶æ›´æ–°

---

## ä¸‰ã€5 ç§ç­–ç•¥å¯¹æ¯”è¡¨ âš–ï¸

| ç»´åº¦ | Module Federation | iframe | qiankun | Web Components | NPM åŒ… |
|------|------------------|--------|---------|----------------|--------|
| **éš”ç¦»çº§åˆ«** | ğŸŸ¡ å…±äº«è¿è¡Œæ—¶ | ğŸŸ¢ å®Œå…¨éš”ç¦» | ğŸŸ¡ JS æ²™ç®± | ğŸŸ¢ Shadow DOM | ğŸ”´ æ— éš”ç¦» |
| **é€šä¿¡æ–¹å¼** | ç›´æ¥è°ƒç”¨ | postMessage | props/äº‹ä»¶ | å±æ€§/äº‹ä»¶ | ç›´æ¥è°ƒç”¨ |
| **æŠ€æœ¯æ ˆé™åˆ¶** | ç›¸åŒæ„å»ºå·¥å…· | æ— é™åˆ¶ | æ— é™åˆ¶ | æ— é™åˆ¶ | ç›¸åŒæ¡†æ¶ |
| **é¦–å±æ€§èƒ½** | ğŸŸ¢ å¥½ | ğŸ”´ å·® | ğŸŸ¡ ä¸­ç­‰ | ğŸŸ¢ å¥½ | ğŸŸ¢ æœ€å¥½ |
| **å¼€å‘ä½“éªŒ** | ğŸŸ¡ ä¸­ç­‰ | ğŸŸ¢ ç®€å• | ğŸŸ¡ ä¸­ç­‰ | ğŸ”´ å¤æ‚ | ğŸŸ¢ ç®€å• |
| **ç‰ˆæœ¬åŒæ­¥** | ğŸŸ¢ è‡ªåŠ¨ | ğŸŸ¢ è‡ªåŠ¨ | ğŸŸ¢ è‡ªåŠ¨ | ğŸŸ¢ è‡ªåŠ¨ | ğŸ”´ æ‰‹åŠ¨ |
| **ç¦»çº¿æ”¯æŒ** | ğŸ”´ ä¸æ”¯æŒ | ğŸ”´ ä¸æ”¯æŒ | ğŸ”´ ä¸æ”¯æŒ | ğŸŸ¢ æ”¯æŒ | ğŸŸ¢ æ”¯æŒ |
| **æµè§ˆå™¨å…¼å®¹** | ğŸŸ¡ ç°ä»£æµè§ˆå™¨ | ğŸŸ¢ æ‰€æœ‰ | ğŸŸ¢ æ‰€æœ‰ | ğŸŸ¡ éœ€ polyfill | ğŸŸ¢ æ‰€æœ‰ |

---

## å››ã€åœºæ™¯é€‰å‹æŒ‡å— ğŸ¯

### ğŸ’¡ å¿«é€Ÿå†³ç­–æ ‘

```
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  éœ€è¦å¾®å‰ç«¯å—ï¼Ÿ           â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â†“               â†“               â†“
              ä¸éœ€è¦ï¼Œ          éœ€è¦å…±äº«ç»„ä»¶      éœ€è¦æ•´ä¸ªåº”ç”¨
              åªæ˜¯å…±äº«ä»£ç                          é›†æˆ
                    â”‚               â”‚               â”‚
                    â†“               â†“               â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
            â”‚  NPM åŒ…   â”‚   â”‚éœ€è¦è·¨æ¡†æ¶å—ï¼Ÿâ”‚        â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜        â”‚
                                   â”‚               â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
                        â†“          â†“          â†“    â†“
                      ä¸éœ€è¦     éœ€è¦ï¼Œ      éœ€è¦
                                å¼ºéš”ç¦»      æŠ€æœ¯æ ˆä¸€è‡´
                        â”‚          â”‚          â”‚    â”‚
                        â†“          â†“          â†“    â†“
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚Module        â”‚ â”‚Web      â”‚ â”‚qiankun/        â”‚
            â”‚Federation    â”‚ â”‚Componentâ”‚ â”‚single-spa      â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
                                              â†“
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚ å­åº”ç”¨æŠ€æœ¯æ ˆä¸åŒï¼Ÿ    â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                               â”‚
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â†“          â†“          â†“
                                  ä¸åŒ       éœ€è¦       å…è®¸
                                            å®Œå…¨éš”ç¦»   JSéš”ç¦»
                                    â”‚          â”‚          â”‚
                                    â†“          â†“          â†“
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚qiankun   â”‚ â”‚ iframe  â”‚ â”‚qiankun  â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“‹ åœºæ™¯é€ŸæŸ¥è¡¨

| åœºæ™¯ | æ¨èæ–¹æ¡ˆ | åŸå›  |
|------|---------|------|
| **ç»„ä»¶åº“è·¨é¡¹ç›®å…±äº«** | Module Federation | è¿è¡Œæ—¶å…±äº«ï¼Œç‰ˆæœ¬è‡ªåŠ¨åŒæ­¥ |
| **åµŒå…¥ç¬¬ä¸‰æ–¹åº”ç”¨** | iframe | å®Œå…¨éš”ç¦»ï¼Œå®‰å…¨å¯æ§ |
| **å¤§å‹ä¼ä¸šåº”ç”¨** | qiankun | å®Œæ•´ç”Ÿå‘½å‘¨æœŸï¼Œæ”¯æŒå¤šæŠ€æœ¯æ ˆ |
| **è®¾è®¡ç³»ç»Ÿ/UIç»„ä»¶** | Web Components | è·¨æ¡†æ¶ï¼Œå¼ºæ ·å¼éš”ç¦» |
| **å›¢é˜Ÿå†…éƒ¨å·¥å…·åº“** | NPM åŒ… | ç®€å•ç›´æ¥ï¼Œç‰ˆæœ¬å¯æ§ |
| **è€ç³»ç»Ÿæ¸è¿›è¿ç§»** | qiankun + iframe | è€ç³»ç»Ÿ iframe åŒ…ï¼Œæ–°æ¨¡å—é€æ­¥ qiankun |
| **éœ€è¦ç¦»çº¿ä½¿ç”¨** | NPM åŒ… / Web Components | ä¸ä¾èµ–è¿œç¨‹èµ„æº |
| **è¿½æ±‚æè‡´æ€§èƒ½** | NPM åŒ…é™æ€å¯¼å…¥ | æ‰“åŒ…ä¼˜åŒ–ï¼ŒTree Shaking |

---

## äº”ã€å®æˆ˜æ¡ˆä¾‹å›é¡¾

### æˆ‘ä»¬åˆšæ‰åšçš„ï¼šModule Federation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       æ¡ˆä¾‹å›é¡¾                               â”‚
â”‚                                                             â”‚
â”‚   é—®é¢˜ï¼šapps-public éœ€è¦ä½¿ç”¨ vue-finderV2 ç»„ä»¶               â”‚
â”‚                                                             â”‚
â”‚   æ–¹æ¡ˆé€‰æ‹©ï¼šModule Federation                                â”‚
â”‚                                                             â”‚
â”‚   åŸå› ï¼š                                                     â”‚
â”‚   1. ç»„ä»¶éœ€è¦ç‹¬ç«‹æ›´æ–°ï¼ˆmf æ›´æ–°ï¼Œapps-public è‡ªåŠ¨ç”Ÿæ•ˆï¼‰         â”‚
â”‚   2. æŠ€æœ¯æ ˆä¸€è‡´ï¼ˆéƒ½æ˜¯ Vue 2ï¼‰                                 â”‚
â”‚   3. éœ€è¦å…±äº«ä¾èµ–ï¼ˆé¿å…ä¸¤ä»½ Vueï¼‰                              â”‚
â”‚   4. ç°æœ‰æ¶æ„å·²ç»ä½¿ç”¨ MFï¼ˆä¿æŒä¸€è‡´æ€§ï¼‰                         â”‚
â”‚                                                             â”‚
â”‚   å®ç°ï¼š                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚   â”‚  mf é¡¹ç›®     â”‚  æš´éœ²     â”‚ apps-public  â”‚               â”‚
â”‚   â”‚              â”‚ â”€â”€â”€â”€â”€â”€â†’   â”‚              â”‚               â”‚
â”‚   â”‚UikitFinderV2 â”‚           â”‚FinderV2      â”‚               â”‚
â”‚   â”‚              â”‚ â†â”€â”€â”€â”€â”€â”€   â”‚Wrapper       â”‚               â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   åŠ è½½    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                             â”‚
â”‚   æ–‡ä»¶å˜æ›´ï¼š                                                 â”‚
â”‚   mf:                                                       â”‚
â”‚   - src/components/UikitFinderV2.js (å°è£…)                  â”‚
â”‚   - build/webpack.config.base.js (expose)                   â”‚
â”‚   - package.json (æ·»åŠ ä¾èµ–)                                  â”‚
â”‚                                                             â”‚
â”‚   apps-public:                                              â”‚
â”‚   - src/utils/finderV2.js (åŠ è½½å·¥å…·)                         â”‚
â”‚   - src/components/FinderV2Wrapper.vue (åŒ…è£…ç»„ä»¶)            â”‚
â”‚   - 4ä¸ªé¡µé¢æ–‡ä»¶ (ä½¿ç”¨ V2 æ›¿æ¢ V1)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å…­ã€æ€»ç»“ ğŸ“

### ä¸€å¥è¯è®°ä½æ¯ç§æ–¹æ¡ˆ

| æ–¹æ¡ˆ | ä¸€å¥è¯ | å…³é”®è¯ |
|------|--------|--------|
| **Module Federation** | å¤šä¸ª webpack åº”ç”¨è¿è¡Œæ—¶å…±äº«ä»£ç  | å…±äº«ã€è¿è¡Œæ—¶ |
| **iframe** | æµè§ˆå™¨åŸç”Ÿçš„å®Œå…¨éš”ç¦»æ–¹æ¡ˆ | éš”ç¦»ã€ç®€å• |
| **qiankun** | åŸºäºè·¯ç”±çš„åº”ç”¨çº§å¾®å‰ç«¯ | è·¯ç”±ã€ç”Ÿå‘½å‘¨æœŸ |
| **Web Components** | æµè§ˆå™¨åŸç”Ÿçš„è·¨æ¡†æ¶ç»„ä»¶ | åŸç”Ÿã€è·¨æ¡†æ¶ |
| **NPM åŒ…** | ä¼ ç»Ÿçš„ä»£ç å…±äº«æ–¹å¼ | ç‰ˆæœ¬æ§åˆ¶ã€ç¦»çº¿ |

### ç»ˆæé€‰æ‹©æ³•åˆ™

> **æ²¡æœ‰æœ€å¥½çš„æ–¹æ¡ˆï¼Œåªæœ‰æœ€é€‚åˆçš„æ–¹æ¡ˆã€‚**

1. **ä¼˜å…ˆè€ƒè™‘ç®€å•æ–¹æ¡ˆ**ï¼šèƒ½ç”¨ NPM åŒ…è§£å†³çš„ï¼Œä¸è¦ä¸Š MF
2. **éš”ç¦»éœ€æ±‚å†³å®šæ–¹æ¡ˆ**ï¼šå®‰å…¨è¦æ±‚é«˜ç”¨ iframeï¼Œæ ·å¼éš”ç¦»ç”¨ Web Components
3. **å›¢é˜Ÿèƒ½åŠ›å†³å®šæ–¹æ¡ˆ**ï¼šæ–°æŠ€æœ¯æœ‰å­¦ä¹ æˆæœ¬ï¼Œè¯„ä¼°å›¢é˜Ÿæ¥å—åº¦
4. **ä¿æŒæ¶æ„ä¸€è‡´æ€§**ï¼šå·²æœ‰æ–¹æ¡ˆèƒ½æ»¡è¶³éœ€æ±‚ï¼Œä¼˜å…ˆæ²¿ç”¨

---

*æ–‡æ¡£ç‰ˆæœ¬ï¼šv1.0*  
*æ›´æ–°æ—¥æœŸï¼š2025-11-27*  
*ä½œè€…ï¼šåŸºäº vue-finderV2 MF æ¥å…¥å®è·µæ€»ç»“*

